{"version":3,"sources":["assets\\Script\\game\\player_tank.js"],"names":["Tank","require","TagOfDirection","cc","Enum","up","right","down","left","Class","properties","tank_1","SpriteFrame","tank_2","tank_3","tank_4","onLoad","map","vv","Global","game","getComponent","_super","UserInfo","live","is_enemy","moveSpeed","fireSpeed","tank_level","moveUp","is_pause","is_over","direction","node","angle","a","getTiledCoordinate","position","b","x","pos","getPosFromTiled","y","moveDown","getTiledRoundCoordinate","moveLeft","moveRight","onFire","player","active","onDestroy","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet Tank = require('Tank')\r\n\r\nvar TagOfDirection = cc.Enum({\r\n    up : 0,\r\n    right : 1,\r\n    down : 2,\r\n    left : 3,\r\n})\r\n\r\ncc.Class({\r\n    extends: Tank,\r\n\r\n    properties: {\r\n        tank_1 : [cc.SpriteFrame],\r\n        tank_2 : [cc.SpriteFrame],\r\n        tank_3 : [cc.SpriteFrame],\r\n        tank_4 : [cc.SpriteFrame],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    onLoad () {\r\n        this.map = cc.vv.Global.game.map.getComponent('game_map')\r\n        this._super()\r\n        cc.vv.UserInfo.live --\r\n        this.is_enemy = false\r\n        this.moveSpeed = 2.625\r\n        this.fireSpeed = 5.25\r\n        this.tank_level = 1\r\n    },\r\n\r\n    moveUp (){\r\n        \r\n        // console.log(this.node.width, this.node.height,1111)\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        // var a = this.map.getTiledRoundCoordinate(this.node.position)        \r\n        var a = this.map.getTiledCoordinate(this.node.position)    \r\n        let b = this.node.position\r\n        if (direction == TagOfDirection.up){\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n            \r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n            \r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveDown (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        \r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveLeft (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveRight (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        \r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    onFire (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_over) return\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.node.active){\r\n            this._super()\r\n        }\r\n    },\r\n\r\n    onDestroy (){\r\n        console.log('player tank destroy')\r\n    }\r\n});\r\n"]}