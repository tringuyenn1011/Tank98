{"version":3,"sources":["assets\\Script\\game\\props.js"],"names":["cc","Class","Component","properties","props_arr","SpriteFrame","icon","Sprite","start","_this","vv","Audio","playPowerupAppear","type","random","Tools","Enum","Props","zhalei","maozi","tieqiao","star","tank","dinglei","spriteFrame","schedule","node","active","update","dr","player","Global","game","a","getBoundingBox","intersects","playPowerupPick","destroy","enemy_tank_arr","forEach","enemy","fire","instantiate","fire_flower_prefab","position","parent","data","level","getComponent","init","shield","shield_prefab","addChild","tieqiao_time","Date","getTime","tank_level","Config","getPlayerTankValue","moveSpeed","fireSpeed","changeTankValue","UserInfo","live","dinglei_time","onDestroy","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        props_arr : [cc.SpriteFrame],\r\n\r\n        icon: cc.Sprite\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        cc.vv.Audio.playPowerupAppear()\r\n        this.type = 0\r\n        let random = cc.vv.Tools.random(1, 7)\r\n        // random = 2\r\n        if (random == 1){\r\n            this.type = cc.vv.Enum.Props.zhalei\r\n        }\r\n        else if (random == 2){\r\n            this.type = cc.vv.Enum.Props.maozi\r\n        }\r\n        else if (random == 3){\r\n            this.type = cc.vv.Enum.Props.tieqiao\r\n        }\r\n        else if (random == 4){\r\n            this.type = cc.vv.Enum.Props.star\r\n        }\r\n        else if (random == 5){\r\n            this.type = cc.vv.Enum.Props.tank\r\n        }\r\n        else if (random == 6){\r\n            this.type = cc.vv.Enum.Props.dinglei\r\n        }\r\n\r\n        this.icon.spriteFrame = this.props_arr[this.type-1]\r\n\r\n        this.schedule(()=>{\r\n            this.icon.node.active = !this.icon.node.active\r\n        }, 0.3)\r\n    },\r\n    \r\n    update (dr){\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.node.active){\r\n            let a = this.node.getBoundingBox().intersects(player.node.getBoundingBox())\r\n            if (a){\r\n                cc.vv.Audio.playPowerupPick()\r\n                if (this.type == cc.vv.Enum.Props.zhalei){\r\n                    this.zhalei()\r\n                }\r\n                else if (this.type == cc.vv.Enum.Props.maozi){\r\n                    this.maozi()\r\n                }\r\n                else if (this.type == cc.vv.Enum.Props.tieqiao){\r\n                    this.tieqiao()\r\n                }\r\n                else if (this.type == cc.vv.Enum.Props.star){\r\n                    this.star()\r\n                }\r\n                else if (this.type == cc.vv.Enum.Props.tank){\r\n                    this.tank()\r\n                }\r\n                else if (this.type == cc.vv.Enum.Props.dinglei){\r\n                    this.dinglei()\r\n                }\r\n                this.node.destroy()\r\n            }\r\n        }\r\n    },\r\n\r\n    zhalei (){\r\n        cc.vv.Global.game.enemy_tank_arr.forEach(enemy=>{\r\n            if (enemy && enemy.node && enemy.node.active){\r\n                let fire = cc.instantiate(cc.vv.Global.game.fire_flower_prefab)\r\n                fire.position = enemy.node.position\r\n                fire.parent = enemy.node.parent\r\n                let data = {\r\n                    level : 1,\r\n                }\r\n                fire.getComponent('fire_flower').init(data)\r\n\r\n                enemy.node.destroy()\r\n            }\r\n        })\r\n    },\r\n\r\n    maozi (){\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.node.active){\r\n            let shield = cc.instantiate(cc.vv.Global.game.shield_prefab)\r\n            player.node.addChild(shield)\r\n            shield.getComponent('shield').init(player, true)\r\n        }\r\n    },\r\n\r\n    tieqiao (){\r\n        cc.vv.Global.tieqiao_time = new Date().getTime()\r\n    },\r\n\r\n    star (){\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.node.active){\r\n            player.tank_level ++\r\n            if (player.tank_level > 4){\r\n                player.tank_level = 4\r\n            }\r\n            let data = cc.vv.Config.getPlayerTankValue(player.tank_level)\r\n            if (data){\r\n                if (data.moveSpeed){\r\n                    player.moveSpeed = data.moveSpeed\r\n                }\r\n                if (data.fireSpeed){\r\n                    player.fireSpeed = data.fireSpeed\r\n                }\r\n            }\r\n            // if (player.tank_level == 1){\r\n                \r\n            //     player.moveSpeed = 1.5\r\n            //     player.fireSpeed = 3\r\n            // }\r\n            // else if (player.tank_level == 2){\r\n            //     player.moveSpeed = 1.7\r\n            //     player.fireSpeed = 3.8\r\n            // }\r\n            // else if (player.tank_level == 3){\r\n            //     player.moveSpeed = 1.9\r\n            //     player.fireSpeed = 4.8\r\n            // }\r\n            // else if (player.tank_level == 4){\r\n            //     player.moveSpeed = 2.1\r\n            //     player.fireSpeed = 5.3\r\n            // }\r\n            player.changeTankValue()\r\n        }\r\n    },\r\n\r\n    tank (){\r\n        cc.vv.UserInfo.live++\r\n    },\r\n\r\n    dinglei (){\r\n        cc.vv.Global.dinglei_time = new Date().getTime()\r\n    },\r\n\r\n    onDestroy (){\r\n        console.log('props destroy')\r\n    }\r\n});\r\n"]}