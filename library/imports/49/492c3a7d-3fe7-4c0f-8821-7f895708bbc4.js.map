{"version":3,"sources":["assets\\Script\\game\\enemy_tank.js"],"names":["Tank","require","TagOfDirection","cc","Enum","up","right","down","left","Class","properties","tank_1","SpriteFrame","tank_hong_1","tank_2","tank_hong_2","tank_3","tank_hong_3","tank_4_1","tank_4_2","tank_4_3","tank_hong_4","start","map","vv","Global","game","getComponent","_super","is_enemy","fireSpeed","flag","tank_level","parseInt","Math","random","data","Config","getEnemyTankValue","moveSpeed","live","stage_info","enemy","tank_4","isHaveHongTank","enemyTankArr","enemy_tank_arr","i","length","enemyTank","node","isValid","tank_hong","hong","enemy_count","changeTankValue","moveUp","is_pause","direction","angle","a","getTiledCoordinate","position","b","x","pos","getPosFromTiled","y","moveDown","getTiledRoundCoordinate","moveLeft","moveRight","onFire","active","update","is_enemy_tank_pause","fire","isBlocked","r","onDestroy","level","addPoint","console","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet Tank = require('Tank')\r\n\r\nvar TagOfDirection = cc.Enum({\r\n    up : 0,\r\n    right : 1,\r\n    down : 2,\r\n    left : 3,\r\n})\r\n\r\n\r\ncc.Class({\r\n    extends: Tank,\r\n\r\n    properties: {\r\n        tank_1 : [cc.SpriteFrame],\r\n        tank_hong_1 : [cc.SpriteFrame],\r\n        tank_2 : [cc.SpriteFrame],\r\n        tank_hong_2 : [cc.SpriteFrame],\r\n        tank_3 : [cc.SpriteFrame],\r\n        tank_hong_3 : [cc.SpriteFrame],\r\n        tank_4_1 : [cc.SpriteFrame],\r\n        tank_4_2 : [cc.SpriteFrame],\r\n        tank_4_3 : [cc.SpriteFrame],\r\n        tank_hong_4 : [cc.SpriteFrame],\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        this.map = cc.vv.Global.game.map.getComponent('game_map')\r\n        this._super()\r\n        this.is_enemy = true\r\n        this.fireSpeed = 4.375\r\n\r\n        let flag = true\r\n        while (flag){\r\n            let tank_level = parseInt(Math.random() * 4) + 1\r\n            this.tank_level = tank_level\r\n            let data = cc.vv.Config.getEnemyTankValue(tank_level)\r\n            if (data){\r\n                if (data.fireSpeed){\r\n                    this.fireSpeed = data.fireSpeed\r\n                }\r\n                if (data.moveSpeed){\r\n                    this.moveSpeed = data.moveSpeed\r\n                }\r\n                if (data.live){\r\n                    this.live = data.live\r\n                }\r\n            }\r\n            if (tank_level == 1){\r\n                if (cc.vv.Global.stage_info.enemy.tank_1 <= 0) {}\r\n                else {\r\n                    cc.vv.Global.stage_info.enemy.tank_1--\r\n                    flag = false\r\n                }\r\n            }\r\n            else if (tank_level == 2){\r\n                if (cc.vv.Global.stage_info.enemy.tank_2 <= 0) {}\r\n                else {\r\n                    cc.vv.Global.stage_info.enemy.tank_2--\r\n                    flag = false\r\n                }\r\n            }\r\n            else if (tank_level == 3){\r\n                if (cc.vv.Global.stage_info.enemy.tank_3 <= 0) {}\r\n                else {\r\n                    cc.vv.Global.stage_info.enemy.tank_3--\r\n                    flag = false\r\n                }\r\n            }\r\n            else if (tank_level == 4){\r\n                if (cc.vv.Global.stage_info.enemy.tank_4 <= 0) {}\r\n                else {\r\n                    cc.vv.Global.stage_info.enemy.tank_4--\r\n                    flag = false\r\n                }\r\n            }\r\n            if (!flag){\r\n                let isHaveHongTank = false\r\n                let enemyTankArr = cc.vv.Global.game.enemy_tank_arr\r\n                for (let i=0;i<enemyTankArr.length;i++){\r\n                    let enemyTank = enemyTankArr[i]\r\n                    if (enemyTank && enemyTank.node && enemyTank.node.isValid){\r\n                        if (enemyTank.tank_hong){\r\n                            isHaveHongTank = true\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                let hong = parseInt(Math.random() * 10)\r\n                if (hong % 4 == 0 && cc.vv.Global.stage_info.hong > 0 && cc.vv.Global.enemy_count < 13 && !isHaveHongTank){\r\n                // if (true){\r\n                    this.tank_hong = true\r\n                    cc.vv.Global.stage_info.hong--\r\n                }\r\n                else {\r\n                    this.tank_hong = false\r\n                }\r\n            }\r\n        }\r\n\r\n        this.changeTankValue()\r\n    },\r\n\r\n    moveUp (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        // if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        // var a = this.map.getTiledRoundCoordinate(this.node.position)        \r\n        var a = this.map.getTiledCoordinate(this.node.position)    \r\n        let b = this.node.position\r\n        if (direction == TagOfDirection.up){\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n            \r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n            \r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveDown (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        // if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        \r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveLeft (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        // if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    moveRight (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        // if (cc.vv.Global.game.is_over) return\r\n        if (!this.map) return\r\n        var direction = -this.node.angle / 90;\r\n        var a = this.map.getTiledRoundCoordinate(this.node.position)\r\n        \r\n        if (direction == TagOfDirection.up){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            let x = a.x%2\r\n            if (x!=0){\r\n                a.x++\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            let y = a.y%2\r\n            if (y!=0){\r\n                a.y--\r\n            }\r\n            let pos = this.map.getPosFromTiled(a)\r\n            this.node.position = pos\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n        }\r\n        this._super()\r\n    },\r\n\r\n    onFire (){\r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (this.node && this.node.active){\r\n            this._super()\r\n        }\r\n    },\r\n\r\n    update(){\r\n        \r\n        if (cc.vv.Global.game.is_pause) return\r\n        if (cc.vv.Global.game.is_enemy_tank_pause) return\r\n        var fire = parseInt(Math.random() * 600);\r\n        if (fire < 10){\r\n            this.onFire()\r\n        }\r\n        var direction = -this.node.angle / 90;\r\n        // console.log(this.moveSpeed, this.tank_level)\r\n        if (direction == TagOfDirection.up){\r\n            this.moveUp();\r\n        }\r\n        else if (direction == TagOfDirection.left){\r\n            this.moveLeft();\r\n        }\r\n        else if (direction == TagOfDirection.down){\r\n            this.moveDown();\r\n        }\r\n        else if (direction == TagOfDirection.right){\r\n            this.moveRight();\r\n        }\r\n        if (!this.isBlocked) {\r\n            return;\r\n        } else {\r\n            var r = parseInt(Math.random() * 10);\r\n            if (r < 2) {\r\n                if (direction != TagOfDirection.up) {\r\n                    this.isBlocked = false;\r\n                    this.moveUp();\r\n                }\r\n            } else if (r < 4) {\r\n                if (direction != TagOfDirection.left) {\r\n                    this.isBlocked = false;\r\n                    this.moveLeft();\r\n                }\r\n            } else if (r < 8) {\r\n                if (direction != TagOfDirection.down) {\r\n                    this.isBlocked = false;\r\n                    this.moveDown();\r\n                }\r\n            } else if (r < 10) {\r\n                if (direction != TagOfDirection.right) {\r\n                    this.isBlocked = false;\r\n                    this.moveRight();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onDestroy(){\r\n        let data = {\r\n            position : this.node.position,\r\n            level : this.tank_level\r\n        }\r\n        this.map = cc.vv.Global.game.map.getComponent('game_map')\r\n        this.map.addPoint(data)\r\n        console.log('enemy tank destroy')\r\n    }\r\n});\r\n"]}