{"version":3,"sources":["assets\\Script\\game\\game_map.js"],"names":["TagOfDirection","cc","Enum","up","right","down","left","Class","Component","properties","level_arr","TiledMapAsset","start","initMap","tiledMap","node","getComponent","TiledMap","tmxAsset","vv","UserInfo","level","bg1","getLayer","bg2","bg3","objects","getObjectGroup","active","bornArray","getObjects","born0","v2","born1","born2","born3","born4","born5","born6","born7","born8","born9","born10","born11","born12","born13","born14","console","log","x","y","player_pos","add","enemy_pos_arr","props_pos_arr","home_pos","initHomeWall","arr","push","initPlayer","data","live","Global","game","is_over","player","instantiate","player_tank_prefab","position","addChild","is_shield","moveSpeed","fireSpeed","tank_level","changeTankValue","callback","shield","shield_prefab","init","is_enemy","appear","appear_prefab","initEnemy","enemy_count","enemy","enemy_tank_prefab","enemy_index","initProps","pos","parseInt","Math","random","length","props","props_prefab","destroy","addPoint","point","point_prefab","score","repairHome","i","home_wall_pos_arr","setTileGIDAt","home_gid_pos_arr1","home_gid_pos_arr2","getPosFromTiled","getTiledRoundCoordinate","cox","coy","layersize","getLayerSize","aa","getTileSize","tilesize","round","width","height","getTiledCoordinate","getTiledRoundIdFromPos","getTileGIDAt","getTiledIdFromPos","gid","checkPoint","toP","tid","isGrassland","collisionTanks","enemy_tank_arr","isValid","getBoundingBox","contains","collisionBullet","bullet_arr","collisionBulletAndEnemyTanks","collisionBulletAndPlayerTanks","onDestroy"],"mappings":"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AAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAEvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAEvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAEvByB,GAAG,CAACC,IAAI,CAACzD,EAAE,CAAC+B,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvByB,GAAG,CAACC,IA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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar TagOfDirection = cc.Enum({\r\n    up : 0,\r\n    right : 1,\r\n    down : 2,\r\n    left : 3,\r\n})\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // bg1: cc.TiledLayer,\r\n        // bg2: cc.TiledLayer,\r\n        // bg3: cc.TiledLayer,\r\n        // objects: cc.TiledObjectGroup,\r\n        level_arr: [cc.TiledMapAsset]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        // this.tiledMap = this.node.getComponent(cc.TiledMap)\r\n        // this.tiledMap.tmxAsset = this.level_arr[4]\r\n\r\n        // this.bg1 = this.tiledMap.getLayer('bg1')\r\n        // this.bg2 = this.tiledMap.getLayer('bg2')\r\n        // this.bg3 = this.tiledMap.getLayer('bg3')\r\n        // this.objects = this.tiledMap.getObjectGroup('objects')\r\n\r\n        // this.home_wall_pos_arr = this.initHomeWall()\r\n        // this.home_gid_pos_arr1 = []\r\n        // this.home_gid_pos_arr2 = []\r\n        // for (let i=0;i<this.home_wall_pos_arr.length;i++){\r\n        //     this.home_gid_pos_arr1.push(this.bg1.getTileGIDAt(this.home_wall_pos_arr[i]))\r\n        // }\r\n        // for (let i=0;i<this.home_wall_pos_arr.length;i++){\r\n        //     this.home_gid_pos_arr2.push(this.bg2.getTileGIDAt(this.home_wall_pos_arr[i]))\r\n        // }\r\n    },\r\n\r\n    initMap(){\r\n        this.tiledMap = this.node.getComponent(cc.TiledMap)\r\n        this.tiledMap.tmxAsset = this.level_arr[cc.vv.UserInfo.level-1]\r\n\r\n        this.bg1 = this.tiledMap.getLayer('bg1')\r\n        this.bg2 = this.tiledMap.getLayer('bg2')\r\n        this.bg3 = this.tiledMap.getLayer('bg3')\r\n        this.objects = this.tiledMap.getObjectGroup('objects')\r\n\r\n        // this.home_wall_pos_arr = this.initHomeWall()\r\n        // this.home_gid_pos_arr1 = []\r\n        // this.home_gid_pos_arr2 = []\r\n        // for (let i=0;i<this.home_wall_pos_arr.length;i++){\r\n        //     this.home_gid_pos_arr1.push(this.bg1.getTileGIDAt(this.home_wall_pos_arr[i]))\r\n        // }\r\n        // for (let i=0;i<this.home_wall_pos_arr.length;i++){\r\n        //     this.home_gid_pos_arr2.push(this.bg2.getTileGIDAt(this.home_wall_pos_arr[i]))\r\n        // }\r\n\r\n        this.bg1.node.active = true\r\n        this.bg2.node.active = false\r\n        this.bg3.node.active = false\r\n\r\n        let bornArray = this.objects.getObjects()\r\n        // console.log(bornArray)\r\n        let born0 = cc.v2(bornArray[0][\"x\"], bornArray[0][\"y\"]);\r\n        let born1 = cc.v2(bornArray[1][\"x\"], bornArray[1][\"y\"]);\r\n        let born2 = cc.v2(bornArray[2][\"x\"], bornArray[2][\"y\"]);\r\n        let born3 = cc.v2(bornArray[3][\"x\"], bornArray[3][\"y\"]);\r\n        let born4 = cc.v2(bornArray[4][\"x\"], bornArray[4][\"y\"]);\r\n        let born5 = cc.v2(bornArray[5][\"x\"], bornArray[5][\"y\"]);\r\n        let born6 = cc.v2(bornArray[6][\"x\"], bornArray[6][\"y\"]);\r\n        let born7 = cc.v2(bornArray[7][\"x\"], bornArray[7][\"y\"]);\r\n        let born8 = cc.v2(bornArray[8][\"x\"], bornArray[8][\"y\"]);\r\n        let born9 = cc.v2(bornArray[9][\"x\"], bornArray[9][\"y\"]);\r\n        let born10 = cc.v2(bornArray[10][\"x\"], bornArray[10][\"y\"]);\r\n        let born11 = cc.v2(bornArray[11][\"x\"], bornArray[11][\"y\"]);\r\n        let born12 = cc.v2(bornArray[12][\"x\"], bornArray[12][\"y\"]);\r\n        let born13 = cc.v2(bornArray[13][\"x\"], bornArray[13][\"y\"]);\r\n        let born14 = cc.v2(bornArray[14][\"x\"], bornArray[14][\"y\"]);\r\n\r\n        console.log(born0.x, born0.y)\r\n\r\n        this.player_pos = born0.add(cc.v2(42*0.5-4, -42*0.5+4))\r\n        this.enemy_pos_arr = [\r\n            born1.add(cc.v2(42*0.5+4, -42*0.5-4)),\r\n            born2.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born3.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n        ]\r\n        this.props_pos_arr = [\r\n            born4.add(cc.v2(42*0.5+4, -42*0.5-4)),\r\n            born5.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born6.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born7.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born8.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born9.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born10.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born11.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born12.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n            born13.add(cc.v2(42*0.5-4, -42*0.5-4)),\r\n        ]\r\n        this.home_pos = born14.add(cc.v2(42*0.5-4, -42*0.5+4))\r\n    },\r\n\r\n    initHomeWall (){\r\n        let arr = []\r\n        arr.push(cc.v2(22, 51))\r\n        arr.push(cc.v2(23, 51))\r\n        arr.push(cc.v2(28, 51))\r\n        arr.push(cc.v2(29, 51))\r\n\r\n        arr.push(cc.v2(22, 50))\r\n        arr.push(cc.v2(23, 50))\r\n        arr.push(cc.v2(28, 50))\r\n        arr.push(cc.v2(29, 50))\r\n\r\n        arr.push(cc.v2(22, 49))\r\n        arr.push(cc.v2(23, 49))\r\n        arr.push(cc.v2(28, 49))\r\n        arr.push(cc.v2(29, 49))\r\n\r\n        arr.push(cc.v2(22, 48))\r\n        arr.push(cc.v2(23, 48))\r\n        arr.push(cc.v2(28, 48))\r\n        arr.push(cc.v2(29, 48))\r\n\r\n        arr.push(cc.v2(22, 47))\r\n        arr.push(cc.v2(23, 47))\r\n        arr.push(cc.v2(24, 47))\r\n        arr.push(cc.v2(25, 47))\r\n        arr.push(cc.v2(26, 47))\r\n        arr.push(cc.v2(27, 47))\r\n        arr.push(cc.v2(28, 47))\r\n        arr.push(cc.v2(29, 47))\r\n\r\n        arr.push(cc.v2(22, 46))\r\n        arr.push(cc.v2(23, 46))\r\n        arr.push(cc.v2(24, 46))\r\n        arr.push(cc.v2(25, 46))\r\n        arr.push(cc.v2(26, 46))\r\n        arr.push(cc.v2(27, 46))\r\n        arr.push(cc.v2(28, 46))\r\n        arr.push(cc.v2(29, 46))\r\n        return arr\r\n    },\r\n\r\n    initPlayer(data){\r\n        if (cc.vv.UserInfo.live <= 0) {\r\n            cc.vv.Global.game.is_over = true\r\n            return\r\n        }\r\n        let player = cc.instantiate(cc.vv.Global.game.player_tank_prefab)\r\n        player.position = this.player_pos\r\n        this.node.addChild(player, -1)\r\n        player.active = false\r\n        player.getComponent('player_tank').is_shield = true\r\n        if (data){\r\n            if (data.moveSpeed){\r\n                player.getComponent('player_tank').moveSpeed = data.moveSpeed\r\n            }\r\n            if (data.fireSpeed){\r\n                player.getComponent('player_tank').fireSpeed = data.fireSpeed\r\n            }\r\n            if (data.tank_level){\r\n                player.getComponent('player_tank').tank_level = data.tank_level\r\n            }\r\n            player.getComponent('player_tank').changeTankValue()\r\n        }\r\n        \r\n        let callback = ()=>{\r\n            player.active = true\r\n            let shield = cc.instantiate(cc.vv.Global.game.shield_prefab)\r\n            player.addChild(shield)\r\n            shield.getComponent('shield').init(player.getComponent('player_tank'))\r\n        }\r\n\r\n        data = {\r\n            is_enemy : false,\r\n            callback : callback\r\n        }\r\n\r\n        let appear = cc.instantiate(cc.vv.Global.game.appear_prefab)\r\n        appear.position = this.player_pos\r\n        this.node.addChild(appear)\r\n        appear.getComponent('appear').init(data)\r\n\r\n        return player.getComponent('player_tank')\r\n    },\r\n\r\n    initEnemy(){\r\n        if (cc.vv.Global.enemy_count <= 0) return\r\n        let enemy = cc.instantiate(cc.vv.Global.game.enemy_tank_prefab)\r\n        enemy.position = this.enemy_pos_arr[cc.vv.Global.game.enemy_index]\r\n        enemy.active = false\r\n        this.node.addChild(enemy,-1)\r\n        enemy.getComponent('enemy_tank').is_shield = true\r\n        cc.vv.Global.game.enemy_index ++\r\n        cc.vv.Global.enemy_count --\r\n        if (cc.vv.Global.game.enemy_index >= 3){\r\n            cc.vv.Global.game.enemy_index = 0\r\n        }\r\n\r\n        let callback = ()=>{\r\n            enemy.active = true\r\n            enemy.getComponent('enemy_tank').is_shield = false\r\n        }\r\n\r\n        let data = {\r\n            is_enemy : true,\r\n            callback : callback\r\n        }\r\n\r\n        let appear = cc.instantiate(cc.vv.Global.game.appear_prefab)\r\n        appear.position = enemy.position\r\n        this.node.addChild(appear)\r\n        appear.getComponent('appear').init(data)\r\n\r\n        return enemy.getComponent('enemy_tank')\r\n    },\r\n\r\n    initProps(){\r\n        let pos = this.props_pos_arr[parseInt(Math.random() * this.props_pos_arr.length)]\r\n        let props = cc.instantiate(cc.vv.Global.game.props_prefab)\r\n        props.position = pos\r\n        this.node.addChild(props)\r\n        if (cc.vv.Global.game.props && cc.vv.Global.game.props.node && cc.vv.Global.game.props.node.active){\r\n            cc.vv.Global.game.props.node.destroy()\r\n        }\r\n        cc.vv.Global.game.props = props.getComponent('props') \r\n    },\r\n\r\n    addPoint (data){\r\n        let point = cc.instantiate(cc.vv.Global.game.point_prefab)\r\n        point.position = data.position\r\n        this.node.addChild(point)\r\n        let score = 0\r\n        if (data.level == 1){\r\n            score = 100\r\n        }\r\n        else if (data.level == 2){\r\n            score = 200\r\n        }\r\n        else if (data.level == 3){\r\n            score = 300\r\n        }\r\n        else if (data.level == 4){\r\n            score = 400\r\n        }\r\n        else if (data.level == 5){\r\n            score = 500\r\n        }\r\n        point.getComponent('point').init(score)\r\n    },\r\n\r\n    repairHome(){\r\n        console.log('修复home')\r\n        for (let i=0;i<this.home_wall_pos_arr.length;i++){\r\n            this.bg1.setTileGIDAt(this.home_gid_pos_arr1[i], this.home_wall_pos_arr[i].x, this.home_wall_pos_arr[i].y, this.home_gid_pos_arr1[i])\r\n            this.bg2.setTileGIDAt(this.home_gid_pos_arr2[i], this.home_wall_pos_arr[i].x, this.home_wall_pos_arr[i].y, this.home_gid_pos_arr2[i])\r\n        }\r\n    },\r\n\r\n    getPosFromTiled(pos){\r\n        if (pos.x < 0 || pos.y < 0){\r\n            return cc.v2(0, 0)\r\n        }\r\n        let x = pos.x*14\r\n        let y = (52-pos.y)*14\r\n        return cc.v2(x, y)\r\n    },\r\n\r\n    getTiledRoundCoordinate:function (pos) {\r\n        var cox = -1, coy = -1;\r\n        var layersize = this.bg1.getLayerSize();\r\n        let aa = this.node.getComponent(cc.TiledMap).getTileSize()\r\n        // var tilesize = this.map1.getTileSize();\r\n        var tilesize = this.tiledMap.getTileSize()\r\n        cox = Math.round((pos.x /*- this.leftBoundary*/) / (tilesize.width));\r\n        coy = Math.round((layersize.height - pos.y / (tilesize.height)));\r\n        // console.log(cox, coy, 11111111)\r\n        if (cox >= 0 && cox < layersize.width && coy >= 0 && coy < layersize.height) {\r\n            return cc.v2(cox, coy);\r\n        } else {\r\n            return cc.v2(-1, -1);\r\n        }\r\n    },\r\n\r\n    getTiledCoordinate:function (pos) {\r\n        var cox = -1, coy = -1;\r\n        var layersize = this.bg1.getLayerSize();\r\n        let aa = this.node.getComponent(cc.TiledMap).getTileSize()\r\n        // var tilesize = this.map1.getTileSize();\r\n        var tilesize = this.tiledMap.getTileSize()\r\n        cox = parseInt((pos.x /*- this.leftBoundary*/) / (tilesize.width));\r\n        coy = parseInt((layersize.height - pos.y / (tilesize.height)));\r\n        // console.log(cox, coy, 11111111)\r\n        if (cox >= 0 && cox < layersize.width && coy >= 0 && coy < layersize.height) {\r\n            return cc.v2(cox, coy);\r\n        } else {\r\n            return cc.v2(-1, -1);\r\n        }\r\n    },\r\n\r\n    getTiledRoundIdFromPos:function (pos) {\r\n        var point = this.getTiledRoundCoordinate(pos);\r\n        if (point.x < 0 || point.y < 0) {\r\n            return -1;\r\n        }\r\n        return this.bg1.getTileGIDAt(point);\r\n    },\r\n\r\n    getTiledIdFromPos:function (pos) {\r\n        var point = this.getTiledCoordinate(pos);\r\n        if (point.x < 0 || point.y < 0) {\r\n            return -1;\r\n        }\r\n        if (this.bg2.node.active){\r\n            let gid = this.bg2.getTileGIDAt(point);\r\n            if (gid > 0){\r\n                return gid\r\n            }\r\n        }\r\n        return this.bg1.getTileGIDAt(point);\r\n    },\r\n\r\n    checkPoint:function (pos) {\r\n        var toP = pos;\r\n        var tid = this.getTiledIdFromPos(pos);\r\n        // 空\r\n        if (tid == 0){\r\n            return false\r\n        }\r\n        // 草地\r\n        else if (cc.vv.Global.isGrassland(tid)){\r\n            return false\r\n        }\r\n        return true\r\n    },\r\n\r\n    collisionTanks (pos) {\r\n        let enemy_tank_arr = cc.vv.Global.game.enemy_tank_arr\r\n        for (let i=0;i<enemy_tank_arr.length;i++){\r\n            if (enemy_tank_arr[i] && enemy_tank_arr[i].node && enemy_tank_arr[i].node.isValid\r\n                 && enemy_tank_arr[i].node.getBoundingBox().contains(pos)){\r\n                return true\r\n            }\r\n        }\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.isValid && player.node.getBoundingBox().contains(pos)){\r\n            return true\r\n        }\r\n        return false;\r\n    },\r\n\r\n    collisionBullet(pos, is_enemy){\r\n        let bullet_arr = cc.vv.Global.game.bullet_arr\r\n        for (let i=0;i<bullet_arr.length;i++){\r\n            if (bullet_arr[i].isValid && bullet_arr[i].getBoundingBox().contains(pos)\r\n             && bullet_arr[i].getComponent('bullet').is_enemy != is_enemy){\r\n                return bullet_arr[i]\r\n            }\r\n        }\r\n        return null\r\n    },\r\n\r\n    collisionBulletAndEnemyTanks (pos){\r\n        let enemy_tank_arr = cc.vv.Global.game.enemy_tank_arr\r\n        for (let i=0;i<enemy_tank_arr.length;i++){\r\n            if (enemy_tank_arr[i] && enemy_tank_arr[i].node && enemy_tank_arr[i].node.isValid && enemy_tank_arr[i].node.getBoundingBox().contains(pos)){\r\n                return enemy_tank_arr[i]\r\n            }\r\n        }\r\n        return null\r\n    },\r\n\r\n    collisionBulletAndPlayerTanks (pos){\r\n        let player = cc.vv.Global.game.player\r\n        if (player && player.node && player.node.active && player.node.isValid && player.node.getBoundingBox().contains(pos)){\r\n            return player\r\n        }\r\n        return null\r\n    },\r\n\r\n    onDestroy (){\r\n        console.log('game map destroy')\r\n    }\r\n});\r\n"]}