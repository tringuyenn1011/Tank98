{"version":3,"sources":["assets\\Script\\ui\\game_result.js"],"names":["cc","Class","Component","properties","bg","Node","title","Sprite","stage_lab","Label","again_btn","next_btn","fail_sf","SpriteFrame","success_sf","onLoad","_this","total_score","getChildByName","getComponent","score_1","tank_num_1","jiantou_1","tank_1","score_2","tank_num_2","jiantou_2","tank_2","score_3","tank_num_3","jiantou_3","tank_3","score_4","tank_num_4","jiantou_4","tank_4","line","total","total_tank_num","dif_y","string","vv","UserInfo","level","active","Global","die_tank","index","count","count_temp","callback","Audio","playResult","data","status","x","unschedule","schedule","init","spriteFrame","onClickChongwan","console","log","require","game","startGame","node","destroy","onClickNext","onDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        bg: cc.Node,\r\n\r\n        title: cc.Sprite,\r\n        stage_lab: cc.Label,\r\n\r\n        again_btn: cc.Node,\r\n        next_btn: cc.Node,\r\n\r\n        fail_sf: cc.SpriteFrame,\r\n        success_sf: cc.SpriteFrame,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    onLoad () {\r\n        let total_score = this.bg.getChildByName('total_score').getComponent(cc.Label)\r\n\r\n        let score_1 = this.bg.getChildByName('score_1').getComponent(cc.Label)\r\n        let tank_num_1 = this.bg.getChildByName('tank_num_1').getComponent(cc.Label)\r\n        let jiantou_1 = this.bg.getChildByName('jiantou_1')\r\n        let tank_1 = this.bg.getChildByName('tank_1')\r\n\r\n        let score_2 = this.bg.getChildByName('score_2').getComponent(cc.Label)\r\n        let tank_num_2 = this.bg.getChildByName('tank_num_2').getComponent(cc.Label)\r\n        let jiantou_2 = this.bg.getChildByName('jiantou_2')\r\n        let tank_2 = this.bg.getChildByName('tank_2')\r\n\r\n        let score_3 = this.bg.getChildByName('score_3').getComponent(cc.Label)\r\n        let tank_num_3 = this.bg.getChildByName('tank_num_3').getComponent(cc.Label)\r\n        let jiantou_3 = this.bg.getChildByName('jiantou_3')\r\n        let tank_3 = this.bg.getChildByName('tank_3')\r\n\r\n        let score_4 = this.bg.getChildByName('score_4').getComponent(cc.Label)\r\n        let tank_num_4 = this.bg.getChildByName('tank_num_4').getComponent(cc.Label)\r\n        let jiantou_4 = this.bg.getChildByName('jiantou_4')\r\n        let tank_4 = this.bg.getChildByName('tank_4')\r\n\r\n        let line = this.bg.getChildByName('line')\r\n        let total = this.bg.getChildByName('total')\r\n        let total_tank_num = this.bg.getChildByName('total_tank_num').getComponent(cc.Label)\r\n\r\n        // this.title.node.position = cc.v2(0, cc.winSize.height * 0.5 - 30)\r\n        // stage.position = this.title.node.position.sub(cc.v2(0, 40))\r\n        // player1.position = cc.v2(-95, stage.y - 25)\r\n        // total_score.node.position = player1.position.sub(cc.v2(0, 35))\r\n        \r\n        // tank_1.position = cc.v2(0, total_score.node.position.y - 35)\r\n        // jiantou_1.position = cc.v2(tank_1.x - 30, tank_1.y)\r\n        // tank_num_1.node.position = cc.v2(jiantou_1.x - 15, jiantou_1.y)\r\n        // score_1.node.position = cc.v2(player1.x, tank_num_1.node.y)\r\n\r\n        let dif_y = 45\r\n        // score_2.node.position = score_1.node.position.sub(cc.v2(0, dif_y))\r\n        // tank_num_2.node.position = tank_num_1.node.position.sub(cc.v2( 0, dif_y))\r\n        // jiantou_2.position = jiantou_1.position.sub(cc.v2( 0, dif_y))\r\n        // tank_2.position = tank_1.position.sub(cc.v2(0, dif_y))\r\n\r\n        // score_3.node.position = score_2.node.position.sub(cc.v2(0, dif_y))\r\n        // tank_num_3.node.position = tank_num_2.node.position.sub(cc.v2( 0, dif_y))\r\n        // jiantou_3.position = jiantou_2.position.sub(cc.v2( 0, dif_y))\r\n        // tank_3.position = tank_2.position.sub(cc.v2(0, dif_y))\r\n\r\n        // score_4.node.position = score_3.node.position.sub(cc.v2(0, dif_y))\r\n        // tank_num_4.node.position = tank_num_3.node.position.sub(cc.v2( 0, dif_y))\r\n        // jiantou_4.position = jiantou_3.position.sub(cc.v2( 0, dif_y))\r\n        // tank_4.position = tank_3.position.sub(cc.v2(0, dif_y))\r\n\r\n        // line.position = cc.v2(0, tank_4.y - 30)\r\n        // total.position = cc.v2(score_4.node.x - score_4.node.width*0.5, tank_4.y - 50)\r\n        // total_tank_num.node.position = tank_num_4.node.position.sub(cc.v2(0, 50))\r\n\r\n        this.stage_lab.string = 'STAGE  '+ cc.vv.UserInfo.level\r\n\r\n        score_1.string = 'PTS'\r\n        score_2.string = 'PTS'\r\n        score_3.string = 'PTS'\r\n        score_4.string = 'PTS'\r\n        tank_num_1.string = ''\r\n        tank_num_2.string = ''\r\n        tank_num_3.string = ''\r\n        tank_num_4.string = ''\r\n        total_tank_num.string = ''\r\n\r\n        this.again_btn.active = false\r\n        this.next_btn.active = false\r\n        // cc.vv.Global.die_tank = {\r\n        //     tank_1 : 3,\r\n        //     tank_2 : 2,\r\n        //     tank_3 : 3,\r\n        //     tank_4 : 2,\r\n        // }\r\n        total_score.string = cc.vv.Global.die_tank.tank_1*100 + cc.vv.Global.die_tank.tank_2*200\r\n                     + cc.vv.Global.die_tank.tank_3*300 + cc.vv.Global.die_tank.tank_4*400\r\n\r\n        let index = 1\r\n        let count = cc.vv.Global.die_tank.tank_1\r\n        let count_temp = 0\r\n        let callback = ()=>{\r\n            cc.vv.Audio.playResult()\r\n            if (index == 1){\r\n                count = cc.vv.Global.die_tank.tank_1\r\n                score_1.string = 100*count_temp+' PTS'\r\n                tank_num_1.string = count_temp\r\n            }\r\n            else if (index == 2){\r\n                count = cc.vv.Global.die_tank.tank_2\r\n                score_2.string = 200*count_temp+' PTS'\r\n                tank_num_2.string = count_temp\r\n            }\r\n            else if (index == 3){\r\n                count = cc.vv.Global.die_tank.tank_3\r\n                score_3.string = 300*count_temp+' PTS'\r\n                tank_num_3.string = count_temp\r\n            }\r\n            else if (index == 4){\r\n                count = cc.vv.Global.die_tank.tank_4\r\n                score_4.string = 400*count_temp+' PTS'\r\n                tank_num_4.string = count_temp\r\n            }\r\n            count_temp++\r\n            if (count_temp > count){\r\n                index++\r\n                count_temp = 0\r\n            }\r\n            if (index >= 5){\r\n                total_tank_num.string = cc.vv.Global.die_tank.tank_1 + cc.vv.Global.die_tank.tank_2\r\n                     + cc.vv.Global.die_tank.tank_3 + cc.vv.Global.die_tank.tank_4\r\n                     \r\n                // 失败\r\n                if (this.data.status == 0){\r\n                    this.again_btn.x = 0\r\n                    this.again_btn.active = true\r\n                }\r\n                // 胜利\r\n                else if (this.data.status == 1){\r\n                    // this.again_btn.active = true\r\n                    this.next_btn.active = true\r\n                }\r\n                this.unschedule(callback)\r\n            }\r\n        }\r\n        this.schedule(callback, 0.3)\r\n        // this.scheduleOnce(()=>{\r\n        //     let over = cc.instantiate(cc.vv.Global.game.game_over)\r\n        //     cc.vv.Global.game.node.addChild(over)\r\n        //     this.node.destroy()\r\n        // }, 2)\r\n    },\r\n\r\n    init(data){\r\n        this.data = data\r\n        // 失败 -- thua\r\n        if (data.status == 0){\r\n            this.title.spriteFrame = this.fail_sf\r\n        }\r\n        // 胜利 -- thắng\r\n        else if (data.status == 1){\r\n            this.title.spriteFrame = this.success_sf\r\n        }\r\n    },\r\n\r\n    onClickChongwan (){\r\n        console.log('重玩')\r\n        let UserInfo = require('UserInfo')\r\n        cc.vv.UserInfo = new UserInfo()\r\n        cc.vv.Global.game.startGame()\r\n        this.node.destroy()\r\n    },\r\n\r\n    onClickNext (){\r\n        console.log('下一关')\r\n        cc.vv.UserInfo.level++\r\n        cc.vv.Global.game.startGame()\r\n        this.node.destroy()\r\n    },\r\n\r\n    onDestroy(){\r\n        console.log('game result destroy')\r\n    }\r\n});\r\n"]}