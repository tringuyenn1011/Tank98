{"version":3,"sources":["assets\\Script\\game\\direction.js"],"names":["TagOfDirection","cc","Enum","up","right","down","left","no","Class","Component","properties","diretion_icon","Sprite","SpriteFrame","none","up_icon","Node","down_icon","left_icon","right_icon","start","spriteFrame","direction","node","parent","on","EventType","TOUCH_START","cbTouchStart","TOUCH_MOVE","cbTouchMove","TOUCH_END","cbTouchEnd","TOUCH_CANCEL","cbTouchCancel","event","console","log","pos","getLocation","getBoundingBoxToWorld","contains","vv","Global","game","player_direction","update","onMoveLeft"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar TagOfDirection = cc.Enum({\r\n    up : 0,\r\n    right : 1,\r\n    down : 2,\r\n    left : 3,\r\n    no : 4,\r\n})\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        diretion_icon: cc.Sprite,\r\n        up: cc.SpriteFrame,\r\n        down: cc.SpriteFrame,\r\n        left: cc.SpriteFrame,\r\n        right: cc.SpriteFrame,\r\n        none: cc.SpriteFrame,\r\n\r\n        up_icon: cc.Node,\r\n        down_icon: cc.Node,\r\n        left_icon: cc.Node,\r\n        right_icon: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        this.diretion_icon.spriteFrame = this.none\r\n        this.direction = TagOfDirection.no\r\n\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_START, this.cbTouchStart, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_MOVE, this.cbTouchMove, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_END, this.cbTouchEnd, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.cbTouchCancel, this);\r\n    },\r\n\r\n    cbTouchStart(event) {\r\n        this.diretion_icon.spriteFrame = this.none\r\n        this.direction = TagOfDirection.no\r\n\r\n        console.log(\"check oke\")\r\n\r\n        let pos = event.getLocation();\r\n        // 上\r\n        if (this.up_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('up')\r\n            this.direction = TagOfDirection.up\r\n        }\r\n        // 下\r\n        else if (this.down_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('down')\r\n            this.direction = TagOfDirection.down\r\n        }\r\n        // 左\r\n        else if (this.left_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('left')\r\n            this.direction = TagOfDirection.left\r\n        }\r\n        // 右\r\n        else if (this.right_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('right')\r\n            this.direction = TagOfDirection.right\r\n        }\r\n    },\r\n\r\n    cbTouchMove(event) {\r\n        let pos = event.getLocation();\r\n        // 上\r\n        if (this.up_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('up')\r\n            this.direction = TagOfDirection.up\r\n        }\r\n        // 下\r\n        else if (this.down_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('down')\r\n            this.direction = TagOfDirection.down\r\n        }\r\n        // 左\r\n        else if (this.left_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('left')\r\n            this.direction = TagOfDirection.left\r\n        }\r\n        // 右\r\n        else if (this.right_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('right')\r\n            this.direction = TagOfDirection.right\r\n        }\r\n    },\r\n\r\n    cbTouchEnd(event) {\r\n        // console.log('end')\r\n        this.direction = TagOfDirection.no\r\n        cc.vv.Global.game.player_direction = TagOfDirection.no\r\n    },\r\n\r\n    cbTouchCancel(event) {\r\n        // console.log('cancel')\r\n        this.direction = TagOfDirection.no\r\n        cc.vv.Global.game.player_direction = TagOfDirection.no\r\n    },\r\n\r\n    update(){\r\n        if (this.direction == TagOfDirection.no){\r\n            this.diretion_icon.spriteFrame = this.none\r\n        }\r\n        else if (this.direction == TagOfDirection.up){\r\n            this.diretion_icon.spriteFrame = this.up\r\n            // console.log('up')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.up\r\n        }\r\n        else if (this.direction == TagOfDirection.down){\r\n            this.diretion_icon.spriteFrame = this.down\r\n            // console.log('down')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.down\r\n        }\r\n        else if (this.direction == TagOfDirection.left){\r\n            this.diretion_icon.spriteFrame = this.left\r\n            // console.log('left')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.left\r\n        }\r\n        else if (this.direction == TagOfDirection.right){\r\n            // console.log('right')\r\n            this.diretion_icon.spriteFrame = this.right\r\n            cc.vv.Global.game.player_direction = TagOfDirection.right\r\n        }\r\n    },\r\n    \r\n\r\n    onMoveLeft(){\r\n        this.direction = TagOfDirection.left\r\n    }\r\n});\r\n"]}