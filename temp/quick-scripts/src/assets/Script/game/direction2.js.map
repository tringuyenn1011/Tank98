{"version":3,"sources":["assets\\Script\\game\\direction2.js"],"names":["TagOfDirection","cc","Enum","up","right","down","left","no","Class","Component","properties","Sprite","up_icon","Node","down_icon","left_icon","right_icon","SpriteFrame","clicked","start","spriteFrame","direction","node","parent","on","EventType","TOUCH_START","cbTouchStart","TOUCH_MOVE","cbTouchMove","TOUCH_END","cbTouchEnd","TOUCH_CANCEL","cbTouchCancel","event","pos","getLocation","getBoundingBoxToWorld","contains","vv","Global","game","player_direction","update","setDefault"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar TagOfDirection = cc.Enum({\r\n    up : 0,\r\n    right : 1,\r\n    down : 2,\r\n    left : 3,\r\n    no : 4,\r\n})\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // diretion_icon: cc.Sprite,\r\n        up: cc.Sprite,\r\n        down: cc.Sprite,\r\n        left: cc.Sprite,\r\n        right: cc.Sprite,\r\n\r\n        up_icon: cc.Node,\r\n        down_icon: cc.Node,\r\n        left_icon: cc.Node,\r\n        right_icon: cc.Node,\r\n\r\n        default: cc.SpriteFrame,\r\n        clicked: cc.SpriteFrame,\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n        this.up.spriteFrame = this.default\r\n        this.down.spriteFrame = this.default\r\n        this.left.spriteFrame = this.default\r\n        this.right.spriteFrame = this.default\r\n         \r\n        //this.diretion_icon.spriteFrame = this.none\r\n        this.direction = TagOfDirection.no\r\n\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_START, this.cbTouchStart, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_MOVE, this.cbTouchMove, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_END, this.cbTouchEnd, this);\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.cbTouchCancel, this);\r\n    },\r\n\r\n    cbTouchStart(event) {\r\n        this.up.spriteFrame = this.default\r\n        this.down.spriteFrame = this.default\r\n        this.left.spriteFrame = this.default\r\n        this.right.spriteFrame = this.default\r\n        //this.diretion_icon.spriteFrame = this.none\r\n\r\n        \r\n        this.direction = TagOfDirection.no\r\n        let pos = event.getLocation();\r\n        // 上\r\n        if (this.up_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('up')\r\n            this.direction = TagOfDirection.up\r\n        }\r\n        // 下\r\n        else if (this.down_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('down')\r\n            this.direction = TagOfDirection.down\r\n        }\r\n        // 左\r\n        else if (this.left_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('left')\r\n            this.direction = TagOfDirection.left\r\n        }\r\n        // 右\r\n        else if (this.right_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('right')\r\n            this.direction = TagOfDirection.right\r\n        }\r\n    },\r\n\r\n    cbTouchMove(event) {\r\n        let pos = event.getLocation();\r\n        // 上\r\n        if (this.up_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('up')\r\n            this.direction = TagOfDirection.up\r\n        }\r\n        // 下\r\n        else if (this.down_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('down')\r\n            this.direction = TagOfDirection.down\r\n        }\r\n        // 左\r\n        else if (this.left_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('left')\r\n            this.direction = TagOfDirection.left\r\n        }\r\n        // 右\r\n        else if (this.right_icon.getBoundingBoxToWorld().contains(pos)){\r\n            // console.log('right')\r\n            this.direction = TagOfDirection.right\r\n        }\r\n    },\r\n\r\n    cbTouchEnd(event) {\r\n        // console.log('end')\r\n        this.direction = TagOfDirection.no\r\n        cc.vv.Global.game.player_direction = TagOfDirection.no\r\n    },\r\n\r\n    cbTouchCancel(event) {\r\n        // console.log('cancel')\r\n        this.direction = TagOfDirection.no\r\n        cc.vv.Global.game.player_direction = TagOfDirection.no\r\n    },\r\n\r\n    update(){\r\n        if (this.direction == TagOfDirection.no){\r\n            //this.diretion_icon.spriteFrame = this.none\r\n            this.setDefault()\r\n        }\r\n        else if (this.direction == TagOfDirection.up){\r\n            //this.diretion_icon.spriteFrame = this.up\r\n            this.setDefault()\r\n            this.up.spriteFrame = this.clicked\r\n            // console.log('up')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.up\r\n        }\r\n        else if (this.direction == TagOfDirection.down){\r\n            //this.diretion_icon.spriteFrame = this.down\r\n            this.setDefault()\r\n            this.down.spriteFrame = this.clicked\r\n            // console.log('down')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.down\r\n        }\r\n        else if (this.direction == TagOfDirection.left){\r\n           // this.diretion_icon.spriteFrame = this.left\r\n           this.setDefault()\r\n           this.left.spriteFrame = this.clicked\r\n            // console.log('left')\r\n            cc.vv.Global.game.player_direction = TagOfDirection.left\r\n        }\r\n        else if (this.direction == TagOfDirection.right){\r\n            // console.log('right')\r\n           // this.diretion_icon.spriteFrame = this.right\r\n           this.setDefault()\r\n           this.right.spriteFrame = this.clicked\r\n            cc.vv.Global.game.player_direction = TagOfDirection.right\r\n        }\r\n    },\r\n    \r\n\r\n    setDefault(){\r\n        this.up.spriteFrame = this.default\r\n        this.down.spriteFrame = this.default\r\n        this.left.spriteFrame = this.default\r\n        this.right.spriteFrame = this.default\r\n    }\r\n});\r\n"]}