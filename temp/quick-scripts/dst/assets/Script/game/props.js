
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/game/props.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5fb4co/I59Eq7Vib4W5srMk', 'props');
// Script/game/props.js

"use strict";

// Learn cc.Class:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html

cc.Class({
  "extends": cc.Component,
  properties: {
    props_arr: [cc.SpriteFrame],
    icon: cc.Sprite
  },
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {
    var _this = this;
    cc.vv.Audio.playPowerupAppear();
    this.type = 0;
    var random = cc.vv.Tools.random(1, 7);
    // random = 2
    if (random == 1) {
      this.type = cc.vv.Enum.Props.zhalei;
    } else if (random == 2) {
      this.type = cc.vv.Enum.Props.maozi;
    } else if (random == 3) {
      this.type = cc.vv.Enum.Props.tieqiao;
    } else if (random == 4) {
      this.type = cc.vv.Enum.Props.star;
    } else if (random == 5) {
      this.type = cc.vv.Enum.Props.tank;
    } else if (random == 6) {
      this.type = cc.vv.Enum.Props.dinglei;
    }
    this.icon.spriteFrame = this.props_arr[this.type - 1];
    this.schedule(function () {
      _this.icon.node.active = !_this.icon.node.active;
    }, 0.3);
  },
  update: function update(dr) {
    var player = cc.vv.Global.game.player;
    if (player && player.node && player.node.active) {
      var a = this.node.getBoundingBox().intersects(player.node.getBoundingBox());
      if (a) {
        cc.vv.Audio.playPowerupPick();
        if (this.type == cc.vv.Enum.Props.zhalei) {
          this.zhalei();
        } else if (this.type == cc.vv.Enum.Props.maozi) {
          this.maozi();
        } else if (this.type == cc.vv.Enum.Props.tieqiao) {
          this.tieqiao();
        } else if (this.type == cc.vv.Enum.Props.star) {
          this.star();
        } else if (this.type == cc.vv.Enum.Props.tank) {
          this.tank();
        } else if (this.type == cc.vv.Enum.Props.dinglei) {
          this.dinglei();
        }
        this.node.destroy();
      }
    }
  },
  zhalei: function zhalei() {
    cc.vv.Global.game.enemy_tank_arr.forEach(function (enemy) {
      if (enemy && enemy.node && enemy.node.active) {
        var fire = cc.instantiate(cc.vv.Global.game.fire_flower_prefab);
        fire.position = enemy.node.position;
        fire.parent = enemy.node.parent;
        var data = {
          level: 1
        };
        fire.getComponent('fire_flower').init(data);
        enemy.node.destroy();
      }
    });
  },
  maozi: function maozi() {
    var player = cc.vv.Global.game.player;
    if (player && player.node && player.node.active) {
      var shield = cc.instantiate(cc.vv.Global.game.shield_prefab);
      player.node.addChild(shield);
      shield.getComponent('shield').init(player, true);
    }
  },
  tieqiao: function tieqiao() {
    cc.vv.Global.tieqiao_time = new Date().getTime();
  },
  star: function star() {
    var player = cc.vv.Global.game.player;
    if (player && player.node && player.node.active) {
      player.tank_level++;
      if (player.tank_level > 4) {
        player.tank_level = 4;
      }
      var data = cc.vv.Config.getPlayerTankValue(player.tank_level);
      if (data) {
        if (data.moveSpeed) {
          player.moveSpeed = data.moveSpeed;
        }
        if (data.fireSpeed) {
          player.fireSpeed = data.fireSpeed;
        }
      }
      // if (player.tank_level == 1){

      //     player.moveSpeed = 1.5
      //     player.fireSpeed = 3
      // }
      // else if (player.tank_level == 2){
      //     player.moveSpeed = 1.7
      //     player.fireSpeed = 3.8
      // }
      // else if (player.tank_level == 3){
      //     player.moveSpeed = 1.9
      //     player.fireSpeed = 4.8
      // }
      // else if (player.tank_level == 4){
      //     player.moveSpeed = 2.1
      //     player.fireSpeed = 5.3
      // }
      player.changeTankValue();
    }
  },
  tank: function tank() {
    cc.vv.UserInfo.live++;
  },
  dinglei: function dinglei() {
    cc.vv.Global.dinglei_time = new Date().getTime();
  },
  onDestroy: function onDestroy() {
    console.log('props destroy');
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxnYW1lXFxwcm9wcy5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInByb3BzX2FyciIsIlNwcml0ZUZyYW1lIiwiaWNvbiIsIlNwcml0ZSIsInN0YXJ0IiwiX3RoaXMiLCJ2diIsIkF1ZGlvIiwicGxheVBvd2VydXBBcHBlYXIiLCJ0eXBlIiwicmFuZG9tIiwiVG9vbHMiLCJFbnVtIiwiUHJvcHMiLCJ6aGFsZWkiLCJtYW96aSIsInRpZXFpYW8iLCJzdGFyIiwidGFuayIsImRpbmdsZWkiLCJzcHJpdGVGcmFtZSIsInNjaGVkdWxlIiwibm9kZSIsImFjdGl2ZSIsInVwZGF0ZSIsImRyIiwicGxheWVyIiwiR2xvYmFsIiwiZ2FtZSIsImEiLCJnZXRCb3VuZGluZ0JveCIsImludGVyc2VjdHMiLCJwbGF5UG93ZXJ1cFBpY2siLCJkZXN0cm95IiwiZW5lbXlfdGFua19hcnIiLCJmb3JFYWNoIiwiZW5lbXkiLCJmaXJlIiwiaW5zdGFudGlhdGUiLCJmaXJlX2Zsb3dlcl9wcmVmYWIiLCJwb3NpdGlvbiIsInBhcmVudCIsImRhdGEiLCJsZXZlbCIsImdldENvbXBvbmVudCIsImluaXQiLCJzaGllbGQiLCJzaGllbGRfcHJlZmFiIiwiYWRkQ2hpbGQiLCJ0aWVxaWFvX3RpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInRhbmtfbGV2ZWwiLCJDb25maWciLCJnZXRQbGF5ZXJUYW5rVmFsdWUiLCJtb3ZlU3BlZWQiLCJmaXJlU3BlZWQiLCJjaGFuZ2VUYW5rVmFsdWUiLCJVc2VySW5mbyIsImxpdmUiLCJkaW5nbGVpX3RpbWUiLCJvbkRlc3Ryb3kiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUEsRUFBRSxDQUFDQyxLQUFLLENBQUM7RUFDTCxXQUFTRCxFQUFFLENBQUNF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LE9BQU8sRUFBRTtFQUNwRCxDQUFDO0VBRURVLFNBQVMsV0FBQUEsVUFBQSxFQUFHO0lBQ1JDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsQ0FBQztFQUNoQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGVhcm4gY2MuQ2xhc3M6XHJcbi8vICAtIFtDaGluZXNlXSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9jbGFzcy5odG1sXHJcbi8vICAtIFtFbmdsaXNoXSBodHRwOi8vZG9jcy5jb2NvczJkLXgub3JnL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9jbGFzcy5odG1sXHJcbi8vIExlYXJuIEF0dHJpYnV0ZTpcclxuLy8gIC0gW0NoaW5lc2VdIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvemgvc2NyaXB0aW5nL3JlZmVyZW5jZS9hdHRyaWJ1dGVzLmh0bWxcclxuLy8gIC0gW0VuZ2xpc2hdIGh0dHA6Ly9kb2NzLmNvY29zMmQteC5vcmcvY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL3JlZmVyZW5jZS9hdHRyaWJ1dGVzLmh0bWxcclxuLy8gTGVhcm4gbGlmZS1jeWNsZSBjYWxsYmFja3M6XHJcbi8vICAtIFtDaGluZXNlXSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9saWZlLWN5Y2xlLWNhbGxiYWNrcy5odG1sXHJcbi8vICAtIFtFbmdsaXNoXSBodHRwczovL3d3dy5jb2NvczJkLXgub3JnL2RvY3MvY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2xpZmUtY3ljbGUtY2FsbGJhY2tzLmh0bWxcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcHJvcHNfYXJyIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuXHJcbiAgICAgICAgaWNvbjogY2MuU3ByaXRlXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxyXG5cclxuICAgIC8vIG9uTG9hZCAoKSB7fSxcclxuXHJcbiAgICBzdGFydCAoKSB7XHJcbiAgICAgICAgY2MudnYuQXVkaW8ucGxheVBvd2VydXBBcHBlYXIoKVxyXG4gICAgICAgIHRoaXMudHlwZSA9IDBcclxuICAgICAgICBsZXQgcmFuZG9tID0gY2MudnYuVG9vbHMucmFuZG9tKDEsIDcpXHJcbiAgICAgICAgLy8gcmFuZG9tID0gMlxyXG4gICAgICAgIGlmIChyYW5kb20gPT0gMSl7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGNjLnZ2LkVudW0uUHJvcHMuemhhbGVpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJhbmRvbSA9PSAyKXtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gY2MudnYuRW51bS5Qcm9wcy5tYW96aVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyYW5kb20gPT0gMyl7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGNjLnZ2LkVudW0uUHJvcHMudGllcWlhb1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyYW5kb20gPT0gNCl7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGNjLnZ2LkVudW0uUHJvcHMuc3RhclxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyYW5kb20gPT0gNSl7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGNjLnZ2LkVudW0uUHJvcHMudGFua1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyYW5kb20gPT0gNil7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGNjLnZ2LkVudW0uUHJvcHMuZGluZ2xlaVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pY29uLnNwcml0ZUZyYW1lID0gdGhpcy5wcm9wc19hcnJbdGhpcy50eXBlLTFdXHJcblxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKCk9PntcclxuICAgICAgICAgICAgdGhpcy5pY29uLm5vZGUuYWN0aXZlID0gIXRoaXMuaWNvbi5ub2RlLmFjdGl2ZVxyXG4gICAgICAgIH0sIDAuMylcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHVwZGF0ZSAoZHIpe1xyXG4gICAgICAgIGxldCBwbGF5ZXIgPSBjYy52di5HbG9iYWwuZ2FtZS5wbGF5ZXJcclxuICAgICAgICBpZiAocGxheWVyICYmIHBsYXllci5ub2RlICYmIHBsYXllci5ub2RlLmFjdGl2ZSl7XHJcbiAgICAgICAgICAgIGxldCBhID0gdGhpcy5ub2RlLmdldEJvdW5kaW5nQm94KCkuaW50ZXJzZWN0cyhwbGF5ZXIubm9kZS5nZXRCb3VuZGluZ0JveCgpKVxyXG4gICAgICAgICAgICBpZiAoYSl7XHJcbiAgICAgICAgICAgICAgICBjYy52di5BdWRpby5wbGF5UG93ZXJ1cFBpY2soKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBjYy52di5FbnVtLlByb3BzLnpoYWxlaSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy56aGFsZWkoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50eXBlID09IGNjLnZ2LkVudW0uUHJvcHMubWFvemkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFvemkoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50eXBlID09IGNjLnZ2LkVudW0uUHJvcHMudGllcWlhbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWVxaWFvKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PSBjYy52di5FbnVtLlByb3BzLnN0YXIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcigpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT0gY2MudnYuRW51bS5Qcm9wcy50YW5rKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbmsoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50eXBlID09IGNjLnZ2LkVudW0uUHJvcHMuZGluZ2xlaSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaW5nbGVpKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgemhhbGVpICgpe1xyXG4gICAgICAgIGNjLnZ2Lkdsb2JhbC5nYW1lLmVuZW15X3RhbmtfYXJyLmZvckVhY2goZW5lbXk9PntcclxuICAgICAgICAgICAgaWYgKGVuZW15ICYmIGVuZW15Lm5vZGUgJiYgZW5lbXkubm9kZS5hY3RpdmUpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpcmUgPSBjYy5pbnN0YW50aWF0ZShjYy52di5HbG9iYWwuZ2FtZS5maXJlX2Zsb3dlcl9wcmVmYWIpXHJcbiAgICAgICAgICAgICAgICBmaXJlLnBvc2l0aW9uID0gZW5lbXkubm9kZS5wb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgZmlyZS5wYXJlbnQgPSBlbmVteS5ub2RlLnBhcmVudFxyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwgOiAxLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmlyZS5nZXRDb21wb25lbnQoJ2ZpcmVfZmxvd2VyJykuaW5pdChkYXRhKVxyXG5cclxuICAgICAgICAgICAgICAgIGVuZW15Lm5vZGUuZGVzdHJveSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICBtYW96aSAoKXtcclxuICAgICAgICBsZXQgcGxheWVyID0gY2MudnYuR2xvYmFsLmdhbWUucGxheWVyXHJcbiAgICAgICAgaWYgKHBsYXllciAmJiBwbGF5ZXIubm9kZSAmJiBwbGF5ZXIubm9kZS5hY3RpdmUpe1xyXG4gICAgICAgICAgICBsZXQgc2hpZWxkID0gY2MuaW5zdGFudGlhdGUoY2MudnYuR2xvYmFsLmdhbWUuc2hpZWxkX3ByZWZhYilcclxuICAgICAgICAgICAgcGxheWVyLm5vZGUuYWRkQ2hpbGQoc2hpZWxkKVxyXG4gICAgICAgICAgICBzaGllbGQuZ2V0Q29tcG9uZW50KCdzaGllbGQnKS5pbml0KHBsYXllciwgdHJ1ZSlcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHRpZXFpYW8gKCl7XHJcbiAgICAgICAgY2MudnYuR2xvYmFsLnRpZXFpYW9fdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXIgKCl7XHJcbiAgICAgICAgbGV0IHBsYXllciA9IGNjLnZ2Lkdsb2JhbC5nYW1lLnBsYXllclxyXG4gICAgICAgIGlmIChwbGF5ZXIgJiYgcGxheWVyLm5vZGUgJiYgcGxheWVyLm5vZGUuYWN0aXZlKXtcclxuICAgICAgICAgICAgcGxheWVyLnRhbmtfbGV2ZWwgKytcclxuICAgICAgICAgICAgaWYgKHBsYXllci50YW5rX2xldmVsID4gNCl7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudGFua19sZXZlbCA9IDRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IGNjLnZ2LkNvbmZpZy5nZXRQbGF5ZXJUYW5rVmFsdWUocGxheWVyLnRhbmtfbGV2ZWwpXHJcbiAgICAgICAgICAgIGlmIChkYXRhKXtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLm1vdmVTcGVlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLm1vdmVTcGVlZCA9IGRhdGEubW92ZVNwZWVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5maXJlU3BlZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5maXJlU3BlZWQgPSBkYXRhLmZpcmVTcGVlZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIChwbGF5ZXIudGFua19sZXZlbCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgcGxheWVyLm1vdmVTcGVlZCA9IDEuNVxyXG4gICAgICAgICAgICAvLyAgICAgcGxheWVyLmZpcmVTcGVlZCA9IDNcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmIChwbGF5ZXIudGFua19sZXZlbCA9PSAyKXtcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5tb3ZlU3BlZWQgPSAxLjdcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5maXJlU3BlZWQgPSAzLjhcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmIChwbGF5ZXIudGFua19sZXZlbCA9PSAzKXtcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5tb3ZlU3BlZWQgPSAxLjlcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5maXJlU3BlZWQgPSA0LjhcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmIChwbGF5ZXIudGFua19sZXZlbCA9PSA0KXtcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5tb3ZlU3BlZWQgPSAyLjFcclxuICAgICAgICAgICAgLy8gICAgIHBsYXllci5maXJlU3BlZWQgPSA1LjNcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBwbGF5ZXIuY2hhbmdlVGFua1ZhbHVlKClcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHRhbmsgKCl7XHJcbiAgICAgICAgY2MudnYuVXNlckluZm8ubGl2ZSsrXHJcbiAgICB9LFxyXG5cclxuICAgIGRpbmdsZWkgKCl7XHJcbiAgICAgICAgY2MudnYuR2xvYmFsLmRpbmdsZWlfdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSAoKXtcclxuICAgICAgICBjb25zb2xlLmxvZygncHJvcHMgZGVzdHJveScpXHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=