
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/game/enemy_tank.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '492c3p9P+dMD4ghf4lXCLvE', 'enemy_tank');
// Script/game/enemy_tank.js

"use strict";

// Learn cc.Class:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html
var Tank = require('Tank');
var TagOfDirection = cc.Enum({
  up: 0,
  right: 1,
  down: 2,
  left: 3
});
cc.Class({
  "extends": Tank,
  properties: {
    tank_1: [cc.SpriteFrame],
    tank_hong_1: [cc.SpriteFrame],
    tank_2: [cc.SpriteFrame],
    tank_hong_2: [cc.SpriteFrame],
    tank_3: [cc.SpriteFrame],
    tank_hong_3: [cc.SpriteFrame],
    tank_4_1: [cc.SpriteFrame],
    tank_4_2: [cc.SpriteFrame],
    tank_4_3: [cc.SpriteFrame],
    tank_hong_4: [cc.SpriteFrame]
  },
  // LIFE-CYCLE CALLBACKS:
  // onLoad () {},
  start: function start() {
    this.map = cc.vv.Global.game.map.getComponent('game_map');
    this._super();
    this.is_enemy = true;
    this.fireSpeed = 4.375;
    var flag = true;
    while (flag) {
      var tank_level = parseInt(Math.random() * 4) + 1;
      this.tank_level = tank_level;
      var data = cc.vv.Config.getEnemyTankValue(tank_level);
      if (data) {
        if (data.fireSpeed) {
          this.fireSpeed = data.fireSpeed;
        }
        if (data.moveSpeed) {
          this.moveSpeed = data.moveSpeed;
        }
        if (data.live) {
          this.live = data.live;
        }
      }
      if (tank_level == 1) {
        if (cc.vv.Global.stage_info.enemy.tank_1 <= 0) {} else {
          cc.vv.Global.stage_info.enemy.tank_1--;
          flag = false;
        }
      } else if (tank_level == 2) {
        if (cc.vv.Global.stage_info.enemy.tank_2 <= 0) {} else {
          cc.vv.Global.stage_info.enemy.tank_2--;
          flag = false;
        }
      } else if (tank_level == 3) {
        if (cc.vv.Global.stage_info.enemy.tank_3 <= 0) {} else {
          cc.vv.Global.stage_info.enemy.tank_3--;
          flag = false;
        }
      } else if (tank_level == 4) {
        if (cc.vv.Global.stage_info.enemy.tank_4 <= 0) {} else {
          cc.vv.Global.stage_info.enemy.tank_4--;
          flag = false;
        }
      }
      if (!flag) {
        var isHaveHongTank = false;
        var enemyTankArr = cc.vv.Global.game.enemy_tank_arr;
        for (var i = 0; i < enemyTankArr.length; i++) {
          var enemyTank = enemyTankArr[i];
          if (enemyTank && enemyTank.node && enemyTank.node.isValid) {
            if (enemyTank.tank_hong) {
              isHaveHongTank = true;
              break;
            }
          }
        }
        var hong = parseInt(Math.random() * 10);
        if (hong % 4 == 0 && cc.vv.Global.stage_info.hong > 0 && cc.vv.Global.enemy_count < 13 && !isHaveHongTank) {
          // if (true){
          this.tank_hong = true;
          cc.vv.Global.stage_info.hong--;
        } else {
          this.tank_hong = false;
        }
      }
    }
    this.changeTankValue();
  },
  moveUp: function moveUp() {
    if (cc.vv.Global.game.is_pause) return;
    // if (cc.vv.Global.game.is_over) return
    if (!this.map) return;
    var direction = -this.node.angle / 90;
    // var a = this.map.getTiledRoundCoordinate(this.node.position)        
    var a = this.map.getTiledCoordinate(this.node.position);
    var b = this.node.position;
    if (direction == TagOfDirection.up) {} else if (direction == TagOfDirection.left) {
      var x = a.x % 2;
      if (x != 0) {
        a.x++;
      }
      var pos = this.map.getPosFromTiled(a);
      this.node.position = pos;
    } else if (direction == TagOfDirection.down) {
      var y = a.y % 2;
      if (y != 0) {
        a.y--;
      }
      var _pos = this.map.getPosFromTiled(a);
      this.node.position = _pos;
    } else if (direction == TagOfDirection.right) {
      var _x = a.x % 2;
      if (_x != 0) {
        a.x++;
      }
      var _pos2 = this.map.getPosFromTiled(a);
      this.node.position = _pos2;
    }
    this._super();
  },
  moveDown: function moveDown() {
    if (cc.vv.Global.game.is_pause) return;
    // if (cc.vv.Global.game.is_over) return
    if (!this.map) return;
    var direction = -this.node.angle / 90;
    var a = this.map.getTiledRoundCoordinate(this.node.position);
    if (direction == TagOfDirection.up) {
      var y = a.y % 2;
      if (y != 0) {
        a.y++;
      }
      var pos = this.map.getPosFromTiled(a);
      this.node.position = pos;
    } else if (direction == TagOfDirection.left) {
      var x = a.x % 2;
      if (x != 0) {
        a.x++;
      }
      var _pos3 = this.map.getPosFromTiled(a);
      this.node.position = _pos3;
    } else if (direction == TagOfDirection.down) {} else if (direction == TagOfDirection.right) {
      var _x2 = a.x % 2;
      if (_x2 != 0) {
        a.x--;
      }
      var _pos4 = this.map.getPosFromTiled(a);
      this.node.position = _pos4;
    }
    this._super();
  },
  moveLeft: function moveLeft() {
    if (cc.vv.Global.game.is_pause) return;
    // if (cc.vv.Global.game.is_over) return
    if (!this.map) return;
    var direction = -this.node.angle / 90;
    var a = this.map.getTiledRoundCoordinate(this.node.position);
    if (direction == TagOfDirection.up) {
      var y = a.y % 2;
      if (y != 0) {
        a.y++;
      }
      var pos = this.map.getPosFromTiled(a);
      this.node.position = pos;
    } else if (direction == TagOfDirection.left) {} else if (direction == TagOfDirection.down) {
      var _y = a.y % 2;
      if (_y != 0) {
        a.y--;
      }
      var _pos5 = this.map.getPosFromTiled(a);
      this.node.position = _pos5;
    } else if (direction == TagOfDirection.right) {
      var x = a.x % 2;
      if (x != 0) {
        a.x--;
      }
      var _pos6 = this.map.getPosFromTiled(a);
      this.node.position = _pos6;
    }
    this._super();
  },
  moveRight: function moveRight() {
    if (cc.vv.Global.game.is_pause) return;
    // if (cc.vv.Global.game.is_over) return
    if (!this.map) return;
    var direction = -this.node.angle / 90;
    var a = this.map.getTiledRoundCoordinate(this.node.position);
    if (direction == TagOfDirection.up) {
      var y = a.y % 2;
      if (y != 0) {
        a.y++;
      }
      var pos = this.map.getPosFromTiled(a);
      this.node.position = pos;
    } else if (direction == TagOfDirection.left) {
      var x = a.x % 2;
      if (x != 0) {
        a.x++;
      }
      var _pos7 = this.map.getPosFromTiled(a);
      this.node.position = _pos7;
    } else if (direction == TagOfDirection.down) {
      var _y2 = a.y % 2;
      if (_y2 != 0) {
        a.y--;
      }
      var _pos8 = this.map.getPosFromTiled(a);
      this.node.position = _pos8;
    } else if (direction == TagOfDirection.right) {}
    this._super();
  },
  onFire: function onFire() {
    if (cc.vv.Global.game.is_pause) return;
    if (this.node && this.node.active) {
      this._super();
    }
  },
  update: function update() {
    if (cc.vv.Global.game.is_pause) return;
    if (cc.vv.Global.game.is_enemy_tank_pause) return;
    var fire = parseInt(Math.random() * 600);
    if (fire < 10) {
      this.onFire();
    }
    var direction = -this.node.angle / 90;
    // console.log(this.moveSpeed, this.tank_level)
    if (direction == TagOfDirection.up) {
      this.moveUp();
    } else if (direction == TagOfDirection.left) {
      this.moveLeft();
    } else if (direction == TagOfDirection.down) {
      this.moveDown();
    } else if (direction == TagOfDirection.right) {
      this.moveRight();
    }
    if (!this.isBlocked) {
      return;
    } else {
      var r = parseInt(Math.random() * 10);
      if (r < 2) {
        if (direction != TagOfDirection.up) {
          this.isBlocked = false;
          this.moveUp();
        }
      } else if (r < 4) {
        if (direction != TagOfDirection.left) {
          this.isBlocked = false;
          this.moveLeft();
        }
      } else if (r < 8) {
        if (direction != TagOfDirection.down) {
          this.isBlocked = false;
          this.moveDown();
        }
      } else if (r < 10) {
        if (direction != TagOfDirection.right) {
          this.isBlocked = false;
          this.moveRight();
        }
      }
    }
  },
  onDestroy: function onDestroy() {
    var data = {
      position: this.node.position,
      level: this.tank_level
    };
    this.map = cc.vv.Global.game.map.getComponent('game_map');
    this.map.addPoint(data);
    console.log('enemy tank destroy');
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxnYW1lXFxlbmVteV90YW5rLmpzIl0sIm5hbWVzIjpbIlRhbmsiLCJyZXF1aXJlIiwiVGFnT2ZEaXJlY3Rpb24iLCJjYyIsIkVudW0iLCJ1cCIsInJpZ2h0IiwiZG93biIsImxlZnQiLCJDbGFzcyIsInByb3BlcnRpZXMiLCJ0YW5rXzEiLCJTcHJpdGVGcmFtZSIsInRhbmtfaG9uZ18xIiwidGFua18yIiwidGFua19ob25nXzIiLCJ0YW5rXzMiLCJ0YW5rX2hvbmdfMyIsInRhbmtfNF8xIiwidGFua180XzIiLCJ0YW5rXzRfMyIsInRhbmtfaG9uZ180Iiwic3RhcnQiLCJtYXAiLCJ2diIsIkdsb2JhbCIsImdhbWUiLCJnZXRDb21wb25lbnQiLCJfc3VwZXIiLCJpc19lbmVteSIsImZpcmVTcGVlZCIsImZsYWciLCJ0YW5rX2xldmVsIiwicGFyc2VJbnQiLCJNYXRoIiwicmFuZG9tIiwiZGF0YSIsIkNvbmZpZyIsImdldEVuZW15VGFua1ZhbHVlIiwibW92ZVNwZWVkIiwibGl2ZSIsInN0YWdlX2luZm8iLCJlbmVteSIsInRhbmtfNCIsImlzSGF2ZUhvbmdUYW5rIiwiZW5lbXlUYW5rQXJyIiwiZW5lbXlfdGFua19hcnIiLCJpIiwibGVuZ3RoIiwiZW5lbXlUYW5rIiwibm9kZSIsImlzVmFsaWQiLCJ0YW5rX2hvbmciLCJob25nIiwiZW5lbXlfY291bnQiLCJjaGFuZ2VUYW5rVmFsdWUiLCJtb3ZlVXAiLCJpc19wYXVzZSIsImRpcmVjdGlvbiIsImFuZ2xlIiwiYSIsImdldFRpbGVkQ29vcmRpbmF0ZSIsInBvc2l0aW9uIiwiYiIsIngiLCJwb3MiLCJnZXRQb3NGcm9tVGlsZWQiLCJ5IiwibW92ZURvd24iLCJnZXRUaWxlZFJvdW5kQ29vcmRpbmF0ZSIsIm1vdmVMZWZ0IiwibW92ZVJpZ2h0Iiwib25GaXJlIiwiYWN0aXZlIiwidXBkYXRlIiwiaXNfZW5lbXlfdGFua19wYXVzZSIsImZpcmUiLCJpc0Jsb2NrZWQiLCJyIiwib25EZXN0cm95IiwibGV2ZWwiLCJhZGRQb2ludCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBRTFCLElBQUlDLGNBQWMsR0FBR0MsRUFBRSxDQUFDQyxJQUFJLENBQUM7RUFDekJDLEVBQUUsRUFBRyxDQUFDO0VBQ05DLEtBQUssRUFBRyxDQUFDO0VBQ1RDLElBQUksRUFBRyxDQUFDO0VBQ1JDLElBQUksRUFBRztBQUNYLENBQUMsQ0FBQztBQUdGTCxFQUFFLENBQUNNLEtBQUssQ0FBQztFQUNMLFdBQVNULElBQUk7RUFFYlUsVUFBVSxFQUFFO0lBQ1JDLE1BQU0sRUFBRyxDQUFDUixFQUFFLENBQUNTLFdBQVcsQ0FBQztJQUN6QkMsV0FBVyxFQUFHLENBQUNWLEVBQUUsQ0FBQ1MsV0FBVyxDQUFDO0lBQzlCRSxNQUFNLEVBQUcsQ0FBQ1gsRUFBRSxDQUFDUyxXQUFXLENBQUM7SUFDekJHLFdBQVcsRUFBRyxDQUFDWixFQUFFLENBQUNTLFdBQVcsQ0FBQztJQUM5QkksTUFBTSxFQUFHLENBQUNiLEVBQUUsQ0FBQ1MsV0FBVyxDQUFDO0lBQ3pCSyxXQUFXLEVBQUcsQ0FBQ2QsRUFBRSxDQUFDUyxXQUFXLENBQUM7SUFDOUJNLFFBQVEsRUFBRyxDQUFDZixFQUFFLENBQUNTLFdBQVcsQ0FBQztJQUMzQk8sUUFBUSxFQUFHLENBQUNoQixFQUFFLENBQUNTLFdBQVcsQ0FBQztJQUMzQlEsUUFBUSxFQUFHLENBQUNqQixFQUFFLENBQUNTLFdBQVcsQ0FBQztJQUMzQlMsV0FBVyxFQUFHLENBQUNsQixFQUFFLENBQUNTLFdBQVc7RUFDakMsQ0FBQztFQUVEO0VBRUE7RUFFQVUsS0FBSyxXQUFBQSxNQUFBLEVBQUk7SUFDTCxJQUFJLENBQUNDLEdBQUcsR0FBR3BCLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNILEdBQUcsQ0FBQ0ksWUFBWSxDQUFDLFVBQVUsQ0FBQztJQUN6RCxJQUFJLENBQUNDLE1BQU0sRUFBRTtJQUNiLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUk7SUFDcEIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsS0FBSztJQUV0QixJQUFJQyxJQUFJLEdBQUcsSUFBSTtJQUNmLE9BQU9BLElBQUksRUFBQztNQUNSLElBQUlDLFVBQVUsR0FBR0MsUUFBUSxDQUFDQyxJQUFJLENBQUNDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7TUFDaEQsSUFBSSxDQUFDSCxVQUFVLEdBQUdBLFVBQVU7TUFDNUIsSUFBSUksSUFBSSxHQUFHakMsRUFBRSxDQUFDcUIsRUFBRSxDQUFDYSxNQUFNLENBQUNDLGlCQUFpQixDQUFDTixVQUFVLENBQUM7TUFDckQsSUFBSUksSUFBSSxFQUFDO1FBQ0wsSUFBSUEsSUFBSSxDQUFDTixTQUFTLEVBQUM7VUFDZixJQUFJLENBQUNBLFNBQVMsR0FBR00sSUFBSSxDQUFDTixTQUFTO1FBQ25DO1FBQ0EsSUFBSU0sSUFBSSxDQUFDRyxTQUFTLEVBQUM7VUFDZixJQUFJLENBQUNBLFNBQVMsR0FBR0gsSUFBSSxDQUFDRyxTQUFTO1FBQ25DO1FBQ0EsSUFBSUgsSUFBSSxDQUFDSSxJQUFJLEVBQUM7VUFDVixJQUFJLENBQUNBLElBQUksR0FBR0osSUFBSSxDQUFDSSxJQUFJO1FBQ3pCO01BQ0o7TUFDQSxJQUFJUixVQUFVLElBQUksQ0FBQyxFQUFDO1FBQ2hCLElBQUk3QixFQUFFLENBQUNxQixFQUFFLENBQUNDLE1BQU0sQ0FBQ2dCLFVBQVUsQ0FBQ0MsS0FBSyxDQUFDL0IsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsTUFDNUM7VUFDRFIsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNnQixVQUFVLENBQUNDLEtBQUssQ0FBQy9CLE1BQU0sRUFBRTtVQUN0Q29CLElBQUksR0FBRyxLQUFLO1FBQ2hCO01BQ0osQ0FBQyxNQUNJLElBQUlDLFVBQVUsSUFBSSxDQUFDLEVBQUM7UUFDckIsSUFBSTdCLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDZ0IsVUFBVSxDQUFDQyxLQUFLLENBQUM1QixNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUM1QztVQUNEWCxFQUFFLENBQUNxQixFQUFFLENBQUNDLE1BQU0sQ0FBQ2dCLFVBQVUsQ0FBQ0MsS0FBSyxDQUFDNUIsTUFBTSxFQUFFO1VBQ3RDaUIsSUFBSSxHQUFHLEtBQUs7UUFDaEI7TUFDSixDQUFDLE1BQ0ksSUFBSUMsVUFBVSxJQUFJLENBQUMsRUFBQztRQUNyQixJQUFJN0IsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNnQixVQUFVLENBQUNDLEtBQUssQ0FBQzFCLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQzVDO1VBQ0RiLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDZ0IsVUFBVSxDQUFDQyxLQUFLLENBQUMxQixNQUFNLEVBQUU7VUFDdENlLElBQUksR0FBRyxLQUFLO1FBQ2hCO01BQ0osQ0FBQyxNQUNJLElBQUlDLFVBQVUsSUFBSSxDQUFDLEVBQUM7UUFDckIsSUFBSTdCLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDZ0IsVUFBVSxDQUFDQyxLQUFLLENBQUNDLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQzVDO1VBQ0R4QyxFQUFFLENBQUNxQixFQUFFLENBQUNDLE1BQU0sQ0FBQ2dCLFVBQVUsQ0FBQ0MsS0FBSyxDQUFDQyxNQUFNLEVBQUU7VUFDdENaLElBQUksR0FBRyxLQUFLO1FBQ2hCO01BQ0o7TUFDQSxJQUFJLENBQUNBLElBQUksRUFBQztRQUNOLElBQUlhLGNBQWMsR0FBRyxLQUFLO1FBQzFCLElBQUlDLFlBQVksR0FBRzFDLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNvQixjQUFjO1FBQ25ELEtBQUssSUFBSUMsQ0FBQyxHQUFDLENBQUMsRUFBQ0EsQ0FBQyxHQUFDRixZQUFZLENBQUNHLE1BQU0sRUFBQ0QsQ0FBQyxFQUFFLEVBQUM7VUFDbkMsSUFBSUUsU0FBUyxHQUFHSixZQUFZLENBQUNFLENBQUMsQ0FBQztVQUMvQixJQUFJRSxTQUFTLElBQUlBLFNBQVMsQ0FBQ0MsSUFBSSxJQUFJRCxTQUFTLENBQUNDLElBQUksQ0FBQ0MsT0FBTyxFQUFDO1lBQ3RELElBQUlGLFNBQVMsQ0FBQ0csU0FBUyxFQUFDO2NBQ3BCUixjQUFjLEdBQUcsSUFBSTtjQUNyQjtZQUNKO1VBQ0o7UUFDSjtRQUNBLElBQUlTLElBQUksR0FBR3BCLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDdkMsSUFBSWtCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJbEQsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNnQixVQUFVLENBQUNZLElBQUksR0FBRyxDQUFDLElBQUlsRCxFQUFFLENBQUNxQixFQUFFLENBQUNDLE1BQU0sQ0FBQzZCLFdBQVcsR0FBRyxFQUFFLElBQUksQ0FBQ1YsY0FBYyxFQUFDO1VBQzFHO1VBQ0ksSUFBSSxDQUFDUSxTQUFTLEdBQUcsSUFBSTtVQUNyQmpELEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDZ0IsVUFBVSxDQUFDWSxJQUFJLEVBQUU7UUFDbEMsQ0FBQyxNQUNJO1VBQ0QsSUFBSSxDQUFDRCxTQUFTLEdBQUcsS0FBSztRQUMxQjtNQUNKO0lBQ0o7SUFFQSxJQUFJLENBQUNHLGVBQWUsRUFBRTtFQUMxQixDQUFDO0VBRURDLE1BQU0sV0FBQUEsT0FBQSxFQUFHO0lBQ0wsSUFBSXJELEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMrQixRQUFRLEVBQUU7SUFDaEM7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDbEMsR0FBRyxFQUFFO0lBQ2YsSUFBSW1DLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQ1IsSUFBSSxDQUFDUyxLQUFLLEdBQUcsRUFBRTtJQUNyQztJQUNBLElBQUlDLENBQUMsR0FBRyxJQUFJLENBQUNyQyxHQUFHLENBQUNzQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUNYLElBQUksQ0FBQ1ksUUFBUSxDQUFDO0lBQ3ZELElBQUlDLENBQUMsR0FBRyxJQUFJLENBQUNiLElBQUksQ0FBQ1ksUUFBUTtJQUMxQixJQUFJSixTQUFTLElBQUl4RCxjQUFjLENBQUNHLEVBQUUsRUFBQyxDQUNuQyxDQUFDLE1BQ0ksSUFBSXFELFNBQVMsSUFBSXhELGNBQWMsQ0FBQ00sSUFBSSxFQUFDO01BQ3RDLElBQUl3RCxDQUFDLEdBQUdKLENBQUMsQ0FBQ0ksQ0FBQyxHQUFDLENBQUM7TUFDYixJQUFJQSxDQUFDLElBQUUsQ0FBQyxFQUFDO1FBQ0xKLENBQUMsQ0FBQ0ksQ0FBQyxFQUFFO01BQ1Q7TUFDQSxJQUFJQyxHQUFHLEdBQUcsSUFBSSxDQUFDMUMsR0FBRyxDQUFDMkMsZUFBZSxDQUFDTixDQUFDLENBQUM7TUFDckMsSUFBSSxDQUFDVixJQUFJLENBQUNZLFFBQVEsR0FBR0csR0FBRztJQUU1QixDQUFDLE1BQ0ksSUFBSVAsU0FBUyxJQUFJeEQsY0FBYyxDQUFDSyxJQUFJLEVBQUM7TUFDdEMsSUFBSTRELENBQUMsR0FBR1AsQ0FBQyxDQUFDTyxDQUFDLEdBQUMsQ0FBQztNQUNiLElBQUlBLENBQUMsSUFBRSxDQUFDLEVBQUM7UUFDTFAsQ0FBQyxDQUFDTyxDQUFDLEVBQUU7TUFDVDtNQUNBLElBQUlGLElBQUcsR0FBRyxJQUFJLENBQUMxQyxHQUFHLENBQUMyQyxlQUFlLENBQUNOLENBQUMsQ0FBQztNQUNyQyxJQUFJLENBQUNWLElBQUksQ0FBQ1ksUUFBUSxHQUFHRyxJQUFHO0lBQzVCLENBQUMsTUFDSSxJQUFJUCxTQUFTLElBQUl4RCxjQUFjLENBQUNJLEtBQUssRUFBQztNQUN2QyxJQUFJMEQsRUFBQyxHQUFHSixDQUFDLENBQUNJLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsRUFBQyxJQUFFLENBQUMsRUFBQztRQUNMSixDQUFDLENBQUNJLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUMsS0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEtBQUc7SUFFNUI7SUFDQSxJQUFJLENBQUNyQyxNQUFNLEVBQUU7RUFDakIsQ0FBQztFQUVEd0MsUUFBUSxXQUFBQSxTQUFBLEVBQUc7SUFDUCxJQUFJakUsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQytCLFFBQVEsRUFBRTtJQUNoQztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNsQyxHQUFHLEVBQUU7SUFDZixJQUFJbUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDUixJQUFJLENBQUNTLEtBQUssR0FBRyxFQUFFO0lBQ3JDLElBQUlDLENBQUMsR0FBRyxJQUFJLENBQUNyQyxHQUFHLENBQUM4Qyx1QkFBdUIsQ0FBQyxJQUFJLENBQUNuQixJQUFJLENBQUNZLFFBQVEsQ0FBQztJQUU1RCxJQUFJSixTQUFTLElBQUl4RCxjQUFjLENBQUNHLEVBQUUsRUFBQztNQUMvQixJQUFJOEQsQ0FBQyxHQUFHUCxDQUFDLENBQUNPLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsQ0FBQyxJQUFFLENBQUMsRUFBQztRQUNMUCxDQUFDLENBQUNPLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUYsR0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEdBQUc7SUFDNUIsQ0FBQyxNQUNJLElBQUlQLFNBQVMsSUFBSXhELGNBQWMsQ0FBQ00sSUFBSSxFQUFDO01BQ3RDLElBQUl3RCxDQUFDLEdBQUdKLENBQUMsQ0FBQ0ksQ0FBQyxHQUFDLENBQUM7TUFDYixJQUFJQSxDQUFDLElBQUUsQ0FBQyxFQUFDO1FBQ0xKLENBQUMsQ0FBQ0ksQ0FBQyxFQUFFO01BQ1Q7TUFDQSxJQUFJQyxLQUFHLEdBQUcsSUFBSSxDQUFDMUMsR0FBRyxDQUFDMkMsZUFBZSxDQUFDTixDQUFDLENBQUM7TUFDckMsSUFBSSxDQUFDVixJQUFJLENBQUNZLFFBQVEsR0FBR0csS0FBRztJQUM1QixDQUFDLE1BQ0ksSUFBSVAsU0FBUyxJQUFJeEQsY0FBYyxDQUFDSyxJQUFJLEVBQUMsQ0FDMUMsQ0FBQyxNQUNJLElBQUltRCxTQUFTLElBQUl4RCxjQUFjLENBQUNJLEtBQUssRUFBQztNQUN2QyxJQUFJMEQsR0FBQyxHQUFHSixDQUFDLENBQUNJLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsR0FBQyxJQUFFLENBQUMsRUFBQztRQUNMSixDQUFDLENBQUNJLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUMsS0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEtBQUc7SUFDNUI7SUFDQSxJQUFJLENBQUNyQyxNQUFNLEVBQUU7RUFDakIsQ0FBQztFQUVEMEMsUUFBUSxXQUFBQSxTQUFBLEVBQUc7SUFDUCxJQUFJbkUsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQytCLFFBQVEsRUFBRTtJQUNoQztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNsQyxHQUFHLEVBQUU7SUFDZixJQUFJbUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDUixJQUFJLENBQUNTLEtBQUssR0FBRyxFQUFFO0lBQ3JDLElBQUlDLENBQUMsR0FBRyxJQUFJLENBQUNyQyxHQUFHLENBQUM4Qyx1QkFBdUIsQ0FBQyxJQUFJLENBQUNuQixJQUFJLENBQUNZLFFBQVEsQ0FBQztJQUM1RCxJQUFJSixTQUFTLElBQUl4RCxjQUFjLENBQUNHLEVBQUUsRUFBQztNQUMvQixJQUFJOEQsQ0FBQyxHQUFHUCxDQUFDLENBQUNPLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsQ0FBQyxJQUFFLENBQUMsRUFBQztRQUNMUCxDQUFDLENBQUNPLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUYsR0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEdBQUc7SUFDNUIsQ0FBQyxNQUNJLElBQUlQLFNBQVMsSUFBSXhELGNBQWMsQ0FBQ00sSUFBSSxFQUFDLENBQzFDLENBQUMsTUFDSSxJQUFJa0QsU0FBUyxJQUFJeEQsY0FBYyxDQUFDSyxJQUFJLEVBQUM7TUFDdEMsSUFBSTRELEVBQUMsR0FBR1AsQ0FBQyxDQUFDTyxDQUFDLEdBQUMsQ0FBQztNQUNiLElBQUlBLEVBQUMsSUFBRSxDQUFDLEVBQUM7UUFDTFAsQ0FBQyxDQUFDTyxDQUFDLEVBQUU7TUFDVDtNQUNBLElBQUlGLEtBQUcsR0FBRyxJQUFJLENBQUMxQyxHQUFHLENBQUMyQyxlQUFlLENBQUNOLENBQUMsQ0FBQztNQUNyQyxJQUFJLENBQUNWLElBQUksQ0FBQ1ksUUFBUSxHQUFHRyxLQUFHO0lBQzVCLENBQUMsTUFDSSxJQUFJUCxTQUFTLElBQUl4RCxjQUFjLENBQUNJLEtBQUssRUFBQztNQUN2QyxJQUFJMEQsQ0FBQyxHQUFHSixDQUFDLENBQUNJLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsQ0FBQyxJQUFFLENBQUMsRUFBQztRQUNMSixDQUFDLENBQUNJLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUMsS0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEtBQUc7SUFDNUI7SUFDQSxJQUFJLENBQUNyQyxNQUFNLEVBQUU7RUFDakIsQ0FBQztFQUVEMkMsU0FBUyxXQUFBQSxVQUFBLEVBQUc7SUFDUixJQUFJcEUsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQytCLFFBQVEsRUFBRTtJQUNoQztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNsQyxHQUFHLEVBQUU7SUFDZixJQUFJbUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDUixJQUFJLENBQUNTLEtBQUssR0FBRyxFQUFFO0lBQ3JDLElBQUlDLENBQUMsR0FBRyxJQUFJLENBQUNyQyxHQUFHLENBQUM4Qyx1QkFBdUIsQ0FBQyxJQUFJLENBQUNuQixJQUFJLENBQUNZLFFBQVEsQ0FBQztJQUU1RCxJQUFJSixTQUFTLElBQUl4RCxjQUFjLENBQUNHLEVBQUUsRUFBQztNQUMvQixJQUFJOEQsQ0FBQyxHQUFHUCxDQUFDLENBQUNPLENBQUMsR0FBQyxDQUFDO01BQ2IsSUFBSUEsQ0FBQyxJQUFFLENBQUMsRUFBQztRQUNMUCxDQUFDLENBQUNPLENBQUMsRUFBRTtNQUNUO01BQ0EsSUFBSUYsR0FBRyxHQUFHLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLGVBQWUsQ0FBQ04sQ0FBQyxDQUFDO01BQ3JDLElBQUksQ0FBQ1YsSUFBSSxDQUFDWSxRQUFRLEdBQUdHLEdBQUc7SUFDNUIsQ0FBQyxNQUNJLElBQUlQLFNBQVMsSUFBSXhELGNBQWMsQ0FBQ00sSUFBSSxFQUFDO01BQ3RDLElBQUl3RCxDQUFDLEdBQUdKLENBQUMsQ0FBQ0ksQ0FBQyxHQUFDLENBQUM7TUFDYixJQUFJQSxDQUFDLElBQUUsQ0FBQyxFQUFDO1FBQ0xKLENBQUMsQ0FBQ0ksQ0FBQyxFQUFFO01BQ1Q7TUFDQSxJQUFJQyxLQUFHLEdBQUcsSUFBSSxDQUFDMUMsR0FBRyxDQUFDMkMsZUFBZSxDQUFDTixDQUFDLENBQUM7TUFDckMsSUFBSSxDQUFDVixJQUFJLENBQUNZLFFBQVEsR0FBR0csS0FBRztJQUM1QixDQUFDLE1BQ0ksSUFBSVAsU0FBUyxJQUFJeEQsY0FBYyxDQUFDSyxJQUFJLEVBQUM7TUFDdEMsSUFBSTRELEdBQUMsR0FBR1AsQ0FBQyxDQUFDTyxDQUFDLEdBQUMsQ0FBQztNQUNiLElBQUlBLEdBQUMsSUFBRSxDQUFDLEVBQUM7UUFDTFAsQ0FBQyxDQUFDTyxDQUFDLEVBQUU7TUFDVDtNQUNBLElBQUlGLEtBQUcsR0FBRyxJQUFJLENBQUMxQyxHQUFHLENBQUMyQyxlQUFlLENBQUNOLENBQUMsQ0FBQztNQUNyQyxJQUFJLENBQUNWLElBQUksQ0FBQ1ksUUFBUSxHQUFHRyxLQUFHO0lBQzVCLENBQUMsTUFDSSxJQUFJUCxTQUFTLElBQUl4RCxjQUFjLENBQUNJLEtBQUssRUFBQyxDQUMzQztJQUNBLElBQUksQ0FBQ3NCLE1BQU0sRUFBRTtFQUNqQixDQUFDO0VBRUQ0QyxNQUFNLFdBQUFBLE9BQUEsRUFBRztJQUNMLElBQUlyRSxFQUFFLENBQUNxQixFQUFFLENBQUNDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDK0IsUUFBUSxFQUFFO0lBQ2hDLElBQUksSUFBSSxDQUFDUCxJQUFJLElBQUksSUFBSSxDQUFDQSxJQUFJLENBQUN1QixNQUFNLEVBQUM7TUFDOUIsSUFBSSxDQUFDN0MsTUFBTSxFQUFFO0lBQ2pCO0VBQ0osQ0FBQztFQUVEOEMsTUFBTSxXQUFBQSxPQUFBLEVBQUU7SUFFSixJQUFJdkUsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQytCLFFBQVEsRUFBRTtJQUNoQyxJQUFJdEQsRUFBRSxDQUFDcUIsRUFBRSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQ2lELG1CQUFtQixFQUFFO0lBQzNDLElBQUlDLElBQUksR0FBRzNDLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUM7SUFDeEMsSUFBSXlDLElBQUksR0FBRyxFQUFFLEVBQUM7TUFDVixJQUFJLENBQUNKLE1BQU0sRUFBRTtJQUNqQjtJQUNBLElBQUlkLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQ1IsSUFBSSxDQUFDUyxLQUFLLEdBQUcsRUFBRTtJQUNyQztJQUNBLElBQUlELFNBQVMsSUFBSXhELGNBQWMsQ0FBQ0csRUFBRSxFQUFDO01BQy9CLElBQUksQ0FBQ21ELE1BQU0sRUFBRTtJQUNqQixDQUFDLE1BQ0ksSUFBSUUsU0FBUyxJQUFJeEQsY0FBYyxDQUFDTSxJQUFJLEVBQUM7TUFDdEMsSUFBSSxDQUFDOEQsUUFBUSxFQUFFO0lBQ25CLENBQUMsTUFDSSxJQUFJWixTQUFTLElBQUl4RCxjQUFjLENBQUNLLElBQUksRUFBQztNQUN0QyxJQUFJLENBQUM2RCxRQUFRLEVBQUU7SUFDbkIsQ0FBQyxNQUNJLElBQUlWLFNBQVMsSUFBSXhELGNBQWMsQ0FBQ0ksS0FBSyxFQUFDO01BQ3ZDLElBQUksQ0FBQ2lFLFNBQVMsRUFBRTtJQUNwQjtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNNLFNBQVMsRUFBRTtNQUNqQjtJQUNKLENBQUMsTUFBTTtNQUNILElBQUlDLENBQUMsR0FBRzdDLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7TUFDcEMsSUFBSTJDLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDUCxJQUFJcEIsU0FBUyxJQUFJeEQsY0FBYyxDQUFDRyxFQUFFLEVBQUU7VUFDaEMsSUFBSSxDQUFDd0UsU0FBUyxHQUFHLEtBQUs7VUFDdEIsSUFBSSxDQUFDckIsTUFBTSxFQUFFO1FBQ2pCO01BQ0osQ0FBQyxNQUFNLElBQUlzQixDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ2QsSUFBSXBCLFNBQVMsSUFBSXhELGNBQWMsQ0FBQ00sSUFBSSxFQUFFO1VBQ2xDLElBQUksQ0FBQ3FFLFNBQVMsR0FBRyxLQUFLO1VBQ3RCLElBQUksQ0FBQ1AsUUFBUSxFQUFFO1FBQ25CO01BQ0osQ0FBQyxNQUFNLElBQUlRLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDZCxJQUFJcEIsU0FBUyxJQUFJeEQsY0FBYyxDQUFDSyxJQUFJLEVBQUU7VUFDbEMsSUFBSSxDQUFDc0UsU0FBUyxHQUFHLEtBQUs7VUFDdEIsSUFBSSxDQUFDVCxRQUFRLEVBQUU7UUFDbkI7TUFDSixDQUFDLE1BQU0sSUFBSVUsQ0FBQyxHQUFHLEVBQUUsRUFBRTtRQUNmLElBQUlwQixTQUFTLElBQUl4RCxjQUFjLENBQUNJLEtBQUssRUFBRTtVQUNuQyxJQUFJLENBQUN1RSxTQUFTLEdBQUcsS0FBSztVQUN0QixJQUFJLENBQUNOLFNBQVMsRUFBRTtRQUNwQjtNQUNKO0lBQ0o7RUFDSixDQUFDO0VBRURRLFNBQVMsV0FBQUEsVUFBQSxFQUFFO0lBQ1AsSUFBSTNDLElBQUksR0FBRztNQUNQMEIsUUFBUSxFQUFHLElBQUksQ0FBQ1osSUFBSSxDQUFDWSxRQUFRO01BQzdCa0IsS0FBSyxFQUFHLElBQUksQ0FBQ2hEO0lBQ2pCLENBQUM7SUFDRCxJQUFJLENBQUNULEdBQUcsR0FBR3BCLEVBQUUsQ0FBQ3FCLEVBQUUsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNILEdBQUcsQ0FBQ0ksWUFBWSxDQUFDLFVBQVUsQ0FBQztJQUN6RCxJQUFJLENBQUNKLEdBQUcsQ0FBQzBELFFBQVEsQ0FBQzdDLElBQUksQ0FBQztJQUN2QjhDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG9CQUFvQixDQUFDO0VBQ3JDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMZWFybiBjYy5DbGFzczpcclxuLy8gIC0gW0NoaW5lc2VdIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvemgvc2NyaXB0aW5nL2NsYXNzLmh0bWxcclxuLy8gIC0gW0VuZ2xpc2hdIGh0dHA6Ly9kb2NzLmNvY29zMmQteC5vcmcvY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2NsYXNzLmh0bWxcclxuLy8gTGVhcm4gQXR0cmlidXRlOlxyXG4vLyAgLSBbQ2hpbmVzZV0gaHR0cHM6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC96aC9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxyXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL2RvY3MuY29jb3MyZC14Lm9yZy9jcmVhdG9yL21hbnVhbC9lbi9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxyXG4vLyBMZWFybiBsaWZlLWN5Y2xlIGNhbGxiYWNrczpcclxuLy8gIC0gW0NoaW5lc2VdIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvemgvc2NyaXB0aW5nL2xpZmUtY3ljbGUtY2FsbGJhY2tzLmh0bWxcclxuLy8gIC0gW0VuZ2xpc2hdIGh0dHBzOi8vd3d3LmNvY29zMmQteC5vcmcvZG9jcy9jcmVhdG9yL21hbnVhbC9lbi9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxyXG5sZXQgVGFuayA9IHJlcXVpcmUoJ1RhbmsnKVxyXG5cclxudmFyIFRhZ09mRGlyZWN0aW9uID0gY2MuRW51bSh7XHJcbiAgICB1cCA6IDAsXHJcbiAgICByaWdodCA6IDEsXHJcbiAgICBkb3duIDogMixcclxuICAgIGxlZnQgOiAzLFxyXG59KVxyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IFRhbmssXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRhbmtfMSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgdGFua19ob25nXzEgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIHRhbmtfMiA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgdGFua19ob25nXzIgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIHRhbmtfMyA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgdGFua19ob25nXzMgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIHRhbmtfNF8xIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICB0YW5rXzRfMiA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgdGFua180XzMgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIHRhbmtfaG9uZ180IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XHJcblxyXG4gICAgLy8gb25Mb2FkICgpIHt9LFxyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuICAgICAgICB0aGlzLm1hcCA9IGNjLnZ2Lkdsb2JhbC5nYW1lLm1hcC5nZXRDb21wb25lbnQoJ2dhbWVfbWFwJylcclxuICAgICAgICB0aGlzLl9zdXBlcigpXHJcbiAgICAgICAgdGhpcy5pc19lbmVteSA9IHRydWVcclxuICAgICAgICB0aGlzLmZpcmVTcGVlZCA9IDQuMzc1XHJcblxyXG4gICAgICAgIGxldCBmbGFnID0gdHJ1ZVxyXG4gICAgICAgIHdoaWxlIChmbGFnKXtcclxuICAgICAgICAgICAgbGV0IHRhbmtfbGV2ZWwgPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogNCkgKyAxXHJcbiAgICAgICAgICAgIHRoaXMudGFua19sZXZlbCA9IHRhbmtfbGV2ZWxcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBjYy52di5Db25maWcuZ2V0RW5lbXlUYW5rVmFsdWUodGFua19sZXZlbClcclxuICAgICAgICAgICAgaWYgKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZmlyZVNwZWVkKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVTcGVlZCA9IGRhdGEuZmlyZVNwZWVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5tb3ZlU3BlZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVNwZWVkID0gZGF0YS5tb3ZlU3BlZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmxpdmUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGl2ZSA9IGRhdGEubGl2ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YW5rX2xldmVsID09IDEpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5zdGFnZV9pbmZvLmVuZW15LnRhbmtfMSA8PSAwKSB7fVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MudnYuR2xvYmFsLnN0YWdlX2luZm8uZW5lbXkudGFua18xLS1cclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0YW5rX2xldmVsID09IDIpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5zdGFnZV9pbmZvLmVuZW15LnRhbmtfMiA8PSAwKSB7fVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MudnYuR2xvYmFsLnN0YWdlX2luZm8uZW5lbXkudGFua18yLS1cclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0YW5rX2xldmVsID09IDMpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5zdGFnZV9pbmZvLmVuZW15LnRhbmtfMyA8PSAwKSB7fVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MudnYuR2xvYmFsLnN0YWdlX2luZm8uZW5lbXkudGFua18zLS1cclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0YW5rX2xldmVsID09IDQpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5zdGFnZV9pbmZvLmVuZW15LnRhbmtfNCA8PSAwKSB7fVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MudnYuR2xvYmFsLnN0YWdlX2luZm8uZW5lbXkudGFua180LS1cclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWZsYWcpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzSGF2ZUhvbmdUYW5rID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIGxldCBlbmVteVRhbmtBcnIgPSBjYy52di5HbG9iYWwuZ2FtZS5lbmVteV90YW5rX2FyclxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wO2k8ZW5lbXlUYW5rQXJyLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmVteVRhbmsgPSBlbmVteVRhbmtBcnJbaV1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW5lbXlUYW5rICYmIGVuZW15VGFuay5ub2RlICYmIGVuZW15VGFuay5ub2RlLmlzVmFsaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5lbXlUYW5rLnRhbmtfaG9uZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hhdmVIb25nVGFuayA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgaG9uZyA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAxMClcclxuICAgICAgICAgICAgICAgIGlmIChob25nICUgNCA9PSAwICYmIGNjLnZ2Lkdsb2JhbC5zdGFnZV9pbmZvLmhvbmcgPiAwICYmIGNjLnZ2Lkdsb2JhbC5lbmVteV9jb3VudCA8IDEzICYmICFpc0hhdmVIb25nVGFuayl7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAodHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YW5rX2hvbmcgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgY2MudnYuR2xvYmFsLnN0YWdlX2luZm8uaG9uZy0tXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbmtfaG9uZyA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhbmdlVGFua1ZhbHVlKClcclxuICAgIH0sXHJcblxyXG4gICAgbW92ZVVwICgpe1xyXG4gICAgICAgIGlmIChjYy52di5HbG9iYWwuZ2FtZS5pc19wYXVzZSkgcmV0dXJuXHJcbiAgICAgICAgLy8gaWYgKGNjLnZ2Lkdsb2JhbC5nYW1lLmlzX292ZXIpIHJldHVyblxyXG4gICAgICAgIGlmICghdGhpcy5tYXApIHJldHVyblxyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAtdGhpcy5ub2RlLmFuZ2xlIC8gOTA7XHJcbiAgICAgICAgLy8gdmFyIGEgPSB0aGlzLm1hcC5nZXRUaWxlZFJvdW5kQ29vcmRpbmF0ZSh0aGlzLm5vZGUucG9zaXRpb24pICAgICAgICBcclxuICAgICAgICB2YXIgYSA9IHRoaXMubWFwLmdldFRpbGVkQ29vcmRpbmF0ZSh0aGlzLm5vZGUucG9zaXRpb24pICAgIFxyXG4gICAgICAgIGxldCBiID0gdGhpcy5ub2RlLnBvc2l0aW9uXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi51cCl7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi5sZWZ0KXtcclxuICAgICAgICAgICAgbGV0IHggPSBhLnglMlxyXG4gICAgICAgICAgICBpZiAoeCE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLngrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24uZG93bil7XHJcbiAgICAgICAgICAgIGxldCB5ID0gYS55JTJcclxuICAgICAgICAgICAgaWYgKHkhPTApe1xyXG4gICAgICAgICAgICAgICAgYS55LS1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcG9zID0gdGhpcy5tYXAuZ2V0UG9zRnJvbVRpbGVkKGEpXHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHBvc1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24ucmlnaHQpe1xyXG4gICAgICAgICAgICBsZXQgeCA9IGEueCUyXHJcbiAgICAgICAgICAgIGlmICh4IT0wKXtcclxuICAgICAgICAgICAgICAgIGEueCsrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMubWFwLmdldFBvc0Zyb21UaWxlZChhKVxyXG4gICAgICAgICAgICB0aGlzLm5vZGUucG9zaXRpb24gPSBwb3NcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N1cGVyKClcclxuICAgIH0sXHJcblxyXG4gICAgbW92ZURvd24gKCl7XHJcbiAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5nYW1lLmlzX3BhdXNlKSByZXR1cm5cclxuICAgICAgICAvLyBpZiAoY2MudnYuR2xvYmFsLmdhbWUuaXNfb3ZlcikgcmV0dXJuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuXHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IC10aGlzLm5vZGUuYW5nbGUgLyA5MDtcclxuICAgICAgICB2YXIgYSA9IHRoaXMubWFwLmdldFRpbGVkUm91bmRDb29yZGluYXRlKHRoaXMubm9kZS5wb3NpdGlvbilcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLnVwKXtcclxuICAgICAgICAgICAgbGV0IHkgPSBhLnklMlxyXG4gICAgICAgICAgICBpZiAoeSE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLnkrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi5sZWZ0KXtcclxuICAgICAgICAgICAgbGV0IHggPSBhLnglMlxyXG4gICAgICAgICAgICBpZiAoeCE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLngrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi5kb3duKXtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLnJpZ2h0KXtcclxuICAgICAgICAgICAgbGV0IHggPSBhLnglMlxyXG4gICAgICAgICAgICBpZiAoeCE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLngtLVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N1cGVyKClcclxuICAgIH0sXHJcblxyXG4gICAgbW92ZUxlZnQgKCl7XHJcbiAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5nYW1lLmlzX3BhdXNlKSByZXR1cm5cclxuICAgICAgICAvLyBpZiAoY2MudnYuR2xvYmFsLmdhbWUuaXNfb3ZlcikgcmV0dXJuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuXHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IC10aGlzLm5vZGUuYW5nbGUgLyA5MDtcclxuICAgICAgICB2YXIgYSA9IHRoaXMubWFwLmdldFRpbGVkUm91bmRDb29yZGluYXRlKHRoaXMubm9kZS5wb3NpdGlvbilcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLnVwKXtcclxuICAgICAgICAgICAgbGV0IHkgPSBhLnklMlxyXG4gICAgICAgICAgICBpZiAoeSE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLnkrK1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi5sZWZ0KXtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLmRvd24pe1xyXG4gICAgICAgICAgICBsZXQgeSA9IGEueSUyXHJcbiAgICAgICAgICAgIGlmICh5IT0wKXtcclxuICAgICAgICAgICAgICAgIGEueS0tXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMubWFwLmdldFBvc0Zyb21UaWxlZChhKVxyXG4gICAgICAgICAgICB0aGlzLm5vZGUucG9zaXRpb24gPSBwb3NcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLnJpZ2h0KXtcclxuICAgICAgICAgICAgbGV0IHggPSBhLnglMlxyXG4gICAgICAgICAgICBpZiAoeCE9MCl7XHJcbiAgICAgICAgICAgICAgICBhLngtLVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLm1hcC5nZXRQb3NGcm9tVGlsZWQoYSlcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N1cGVyKClcclxuICAgIH0sXHJcblxyXG4gICAgbW92ZVJpZ2h0ICgpe1xyXG4gICAgICAgIGlmIChjYy52di5HbG9iYWwuZ2FtZS5pc19wYXVzZSkgcmV0dXJuXHJcbiAgICAgICAgLy8gaWYgKGNjLnZ2Lkdsb2JhbC5nYW1lLmlzX292ZXIpIHJldHVyblxyXG4gICAgICAgIGlmICghdGhpcy5tYXApIHJldHVyblxyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAtdGhpcy5ub2RlLmFuZ2xlIC8gOTA7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLm1hcC5nZXRUaWxlZFJvdW5kQ29vcmRpbmF0ZSh0aGlzLm5vZGUucG9zaXRpb24pXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi51cCl7XHJcbiAgICAgICAgICAgIGxldCB5ID0gYS55JTJcclxuICAgICAgICAgICAgaWYgKHkhPTApe1xyXG4gICAgICAgICAgICAgICAgYS55KytcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcG9zID0gdGhpcy5tYXAuZ2V0UG9zRnJvbVRpbGVkKGEpXHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHBvc1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24ubGVmdCl7XHJcbiAgICAgICAgICAgIGxldCB4ID0gYS54JTJcclxuICAgICAgICAgICAgaWYgKHghPTApe1xyXG4gICAgICAgICAgICAgICAgYS54KytcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcG9zID0gdGhpcy5tYXAuZ2V0UG9zRnJvbVRpbGVkKGEpXHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHBvc1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24uZG93bil7XHJcbiAgICAgICAgICAgIGxldCB5ID0gYS55JTJcclxuICAgICAgICAgICAgaWYgKHkhPTApe1xyXG4gICAgICAgICAgICAgICAgYS55LS1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcG9zID0gdGhpcy5tYXAuZ2V0UG9zRnJvbVRpbGVkKGEpXHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHBvc1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24ucmlnaHQpe1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zdXBlcigpXHJcbiAgICB9LFxyXG5cclxuICAgIG9uRmlyZSAoKXtcclxuICAgICAgICBpZiAoY2MudnYuR2xvYmFsLmdhbWUuaXNfcGF1c2UpIHJldHVyblxyXG4gICAgICAgIGlmICh0aGlzLm5vZGUgJiYgdGhpcy5ub2RlLmFjdGl2ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKClcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZSgpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjYy52di5HbG9iYWwuZ2FtZS5pc19wYXVzZSkgcmV0dXJuXHJcbiAgICAgICAgaWYgKGNjLnZ2Lkdsb2JhbC5nYW1lLmlzX2VuZW15X3RhbmtfcGF1c2UpIHJldHVyblxyXG4gICAgICAgIHZhciBmaXJlID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDYwMCk7XHJcbiAgICAgICAgaWYgKGZpcmUgPCAxMCl7XHJcbiAgICAgICAgICAgIHRoaXMub25GaXJlKClcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IC10aGlzLm5vZGUuYW5nbGUgLyA5MDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1vdmVTcGVlZCwgdGhpcy50YW5rX2xldmVsKVxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24udXApe1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVVcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gVGFnT2ZEaXJlY3Rpb24ubGVmdCl7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZUxlZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09IFRhZ09mRGlyZWN0aW9uLmRvd24pe1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVEb3duKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBUYWdPZkRpcmVjdGlvbi5yaWdodCl7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0Jsb2NrZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciByID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgICAgICAgICAgaWYgKHIgPCAyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9IFRhZ09mRGlyZWN0aW9uLnVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Jsb2NrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVVcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHIgPCA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9IFRhZ09mRGlyZWN0aW9uLmxlZnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQmxvY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyIDwgOCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiAhPSBUYWdPZkRpcmVjdGlvbi5kb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Jsb2NrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVEb3duKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAociA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9IFRhZ09mRGlyZWN0aW9uLnJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Jsb2NrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkRlc3Ryb3koKXtcclxuICAgICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAgICAgcG9zaXRpb24gOiB0aGlzLm5vZGUucG9zaXRpb24sXHJcbiAgICAgICAgICAgIGxldmVsIDogdGhpcy50YW5rX2xldmVsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWFwID0gY2MudnYuR2xvYmFsLmdhbWUubWFwLmdldENvbXBvbmVudCgnZ2FtZV9tYXAnKVxyXG4gICAgICAgIHRoaXMubWFwLmFkZFBvaW50KGRhdGEpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2VuZW15IHRhbmsgZGVzdHJveScpXHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=